<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Pascal Hertleif">
  <meta name="author" content="Andreas Diesendorf">
  <title>Projektgruppe Web-Technologie: EpisodeFever</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
  </style>
  <link href="data:text/css,%2F%2A%2A%0A%20%2A%20%23%20Stylesheet%20for%20Pandoc%20Documents%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20%23%23%20Fonts%0A%20%2A%2F%0A%0Abody%20%7B%0A%20%20font%2Dfamily%3A%20Georgia%2C%20Palatino%2C%20%27Palatino%20Linotype%27%2C%20Times%2C%20%27Times%20New%20Roman%27%2C%20serif%3B%0A%20%20font%2Dsize%3A%2012px%3B%0A%20%20line%2Dheight%3A%201%2E7%3B%0A%20%20max%2Dwidth%3A%2042em%3B%0A%7D%0A%0A%40media%20only%20screen%20and%20%28min%2Dwidth%3A%20480px%29%20%7B%0A%20%20body%20%7B%0A%20%20%20%20font%2Dsize%3A%2014px%3B%0A%20%20%7D%0A%7D%0A%40media%20only%20screen%20and%20%28min%2Dwidth%3A%20768px%29%20%7B%0A%20%20body%20%7B%0A%20%20%20%20font%2Dsize%3A%2016px%3B%0A%20%20%7D%0A%7D%0A%0Ah1%2C%20h2%2C%20h3%2C%20h4%2C%20h5%2C%20h6%20%7B%0A%20%20line%2Dheight%3A%20125%25%3B%0A%20%20font%2Dweight%3A%20normal%3B%0A%7D%0A%0Ah4%2C%20h5%2C%20h6%20%7B%0A%20%20font%2Dweight%3A%20bold%3B%0A%7D%0A%0Ah1%20%7B%0A%20%20font%2Dsize%3A%202em%3B%0A%7D%0A%0Ah2%20%7B%0A%20%20font%2Dsize%3A%201%2E8em%3B%0A%7D%0A%0Ah3%20%7B%0A%20%20font%2Dsize%3A%201%2E5em%3B%0A%7D%0A%0Ah4%20%7B%0A%20%20font%2Dsize%3A%201%2E2em%3B%0A%7D%0A%0Ah5%20%7B%0A%20%20font%2Dsize%3A%201em%3B%0A%7D%0A%0Ah6%20%7B%0A%20%20font%2Dsize%3A%200%2E9em%3B%0A%7D%0A%0Apre%2C%20code%2C%20kbd%2C%20samp%20%7B%0A%20%20font%2Dfamily%3A%20monospace%3B%0A%20%20font%2Dsize%3A%200%2E98em%3B%0A%7D%0A%0A%2F%2A%2A%0A%20%2A%20%23%23%20Other%20Styles%0A%20%2A%2F%0A%0Ahtml%20%7B%0A%20%20font%2Dsize%3A%20100%25%3B%0A%20%20overflow%2Dy%3A%20scroll%3B%0A%20%20%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%20%20%2Dms%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%7D%0A%0Abody%20%7B%0A%20%20color%3A%20%23444%3B%0A%20%20padding%3A%201em%3B%0A%20%20margin%3A%20auto%3B%0A%20%20background%3A%20%23fefefe%3B%0A%7D%0A%0Aa%20%7B%0A%20%20color%3A%20%230645ad%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%0Aa%3Avisited%20%7B%0A%20%20color%3A%20%230b0080%3B%0A%7D%0A%0Aa%3Ahover%20%7B%0A%20%20color%3A%20%2306e%3B%0A%7D%0A%0Aa%3Aactive%20%7B%0A%20%20color%3A%20%23faa700%3B%0A%7D%0A%0Aa%3Afocus%20%7B%0A%20%20outline%3A%20thin%20dotted%3B%0A%7D%0A%0A%2A%3A%3A%2Dmoz%2Dselection%20%7B%0A%20%20background%3A%20rgba%28255%2C%20255%2C%200%2C%200%2E3%29%3B%0A%20%20color%3A%20%23000%3B%0A%7D%0A%0A%2A%3A%3Aselection%20%7B%0A%20%20background%3A%20rgba%28255%2C%20255%2C%200%2C%200%2E3%29%3B%0A%20%20color%3A%20%23000%3B%0A%7D%0A%0Aa%3A%3A%2Dmoz%2Dselection%20%7B%0A%20%20background%3A%20rgba%28255%2C%20255%2C%200%2C%200%2E3%29%3B%0A%20%20color%3A%20%230645ad%3B%0A%7D%0A%0Aa%3A%3Aselection%20%7B%0A%20%20background%3A%20rgba%28255%2C%20255%2C%200%2C%200%2E3%29%3B%0A%20%20color%3A%20%230645ad%3B%0A%7D%0A%0Ah1%2C%20h2%2C%20h3%2C%20h4%2C%20h5%2C%20h6%20%7B%0A%20%20color%3A%20%23111%3B%0A%20%20line%2Dheight%3A%20125%25%3B%0A%20%20margin%2Dtop%3A%201em%3B%0A%20%20font%2Dweight%3A%20normal%3B%0A%7D%0A%0Ap%20%7B%0A%20%20margin%3A%201em%200%3B%0A%7D%0A%0Aimg%20%7B%0A%20%20max%2Dwidth%3A%20100%25%3B%0A%7D%0A%0Aq%20%7B%20quotes%3A%20%22%E2%80%9C%22%20%22%E2%80%9D%22%20%22%E2%80%98%22%20%22%E2%80%99%22%3B%20%7D%0A%0A%5Blang%3Dde%5D%20q%20%7B%0A%20%20quotes%3A%20%22%5C00bb%22%20%22%5C00ab%22%20%22%5C203A%22%20%22%5C2039%22%3B%0A%7D%0A%0Ablockquote%2C%0Aaside%2Enotes%20%7B%0A%20%20color%3A%20%23666666%3B%0A%20%20margin%3A%200%3B%0A%20%20padding%2Dleft%3A%203em%3B%0A%20%20border%2Dleft%3A%200%2E5em%20%23EEE%20solid%3B%0A%7D%0A%0Aaside%2Enotes%20%7B%0A%20%20color%3A%20%23999%3B%0A%20%20border%2Dleft%2Dcolor%3A%20%23ffa%3B%0A%7D%0A%0Ahr%20%7B%0A%20%20display%3A%20block%3B%0A%20%20height%3A%202px%3B%0A%20%20border%3A%200%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23aaa%3B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%20%20margin%3A%201em%200%3B%0A%20%20padding%3A%200%3B%0A%7D%0A%0Apre%2C%20code%2C%20kbd%2C%20samp%20%7B%0A%20%20color%3A%20%23000%3B%0A%7D%0A%0Apre%20%7B%0A%20%20white%2Dspace%3A%20pre%3B%0A%20%20white%2Dspace%3A%20pre%2Dwrap%3B%0A%20%20word%2Dwrap%3A%20break%2Dword%3B%0A%20%20padding%3A%200%2E1em%200%2E4em%3B%0A%20%20text%2Dindent%3A%201em%3B%0A%7D%0A%0Ab%2C%20strong%20%7B%0A%20%20font%2Dweight%3A%20bold%3B%0A%7D%0A%0Adfn%20%7B%0A%20%20font%2Dstyle%3A%20italic%3B%0A%7D%0A%0Ains%20%7B%0A%20%20background%3A%20%23ff9%3B%0A%20%20color%3A%20%23000%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%0Amark%20%7B%0A%20%20background%3A%20%23ff0%3B%0A%20%20color%3A%20%23000%3B%0A%20%20font%2Dstyle%3A%20italic%3B%0A%20%20font%2Dweight%3A%20bold%3B%0A%7D%0A%0Asub%2C%20sup%20%7B%0A%20%20font%2Dsize%3A%2075%25%3B%0A%20%20line%2Dheight%3A%200%3B%0A%20%20position%3A%20relative%3B%0A%20%20vertical%2Dalign%3A%20baseline%3B%0A%7D%0A%0Asup%20%7B%0A%20%20top%3A%20%2D0%2E5em%3B%0A%7D%0A%0Asub%20%7B%0A%20%20bottom%3A%20%2D0%2E25em%3B%0A%7D%0A%0Aul%2C%20ol%20%7B%0A%20%20margin%3A%201em%200%3B%0A%20%20padding%3A%200%200%200%202em%3B%0A%7D%0A%0Ali%20p%3Alast%2Dchild%20%7B%0A%20%20margin%2Dbottom%3A%200%3B%0A%7D%0A%0Aul%20ul%2C%20ol%20ol%20%7B%0A%20%20margin%3A%20%2E3em%200%3B%0A%7D%0A%0Adl%20%7B%0A%20%20margin%2Dbottom%3A%201em%3B%0A%7D%0A%0Adt%20%7B%0A%20%20font%2Dweight%3A%20bold%3B%0A%20%20margin%2Dbottom%3A%20%2E8em%3B%0A%7D%0A%0Add%20%7B%0A%20%20margin%3A%200%200%20%2E8em%202em%3B%0A%7D%0A%0Add%3Alast%2Dchild%20%7B%0A%20%20margin%2Dbottom%3A%200%3B%0A%7D%0A%0Aimg%20%7B%0A%20%20border%3A%200%3B%0A%20%20%2Dms%2Dinterpolation%2Dmode%3A%20bicubic%3B%0A%20%20vertical%2Dalign%3A%20middle%3B%0A%7D%0A%0Afigure%20%7B%0A%20%20display%3A%20block%3B%0A%20%20text%2Dalign%3A%20center%3B%0A%20%20margin%3A%202em%200%3B%0A%7D%0A%0Afigure%20img%20%7B%0A%20%20border%3A%20none%3B%0A%20%20margin%3A%200%20auto%201em%3B%0A%7D%0A%0Afigcaption%20%7B%0A%20%20font%2Dsize%3A%200%2E8em%3B%0A%20%20font%2Dstyle%3A%20italic%3B%0A%20%20margin%3A%200%200%20%2E8em%3B%0A%7D%0A%0Atable%20%7B%0A%20%20margin%2Dbottom%3A%202em%3B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23ddd%3B%0A%20%20border%2Dright%3A%201px%20solid%20%23ddd%3B%0A%20%20border%2Dspacing%3A%200%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%7D%0A%0Atable%20th%20%7B%0A%20%20padding%3A%20%2E2em%201em%3B%0A%20%20background%2Dcolor%3A%20%23eee%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23ddd%3B%0A%20%20border%2Dleft%3A%201px%20solid%20%23ddd%3B%0A%7D%0A%0Atable%20td%20%7B%0A%20%20padding%3A%20%2E2em%201em%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23ddd%3B%0A%20%20border%2Dleft%3A%201px%20solid%20%23ddd%3B%0A%20%20vertical%2Dalign%3A%20top%3B%0A%7D%0A%0A%2Ebyline%20%7B%0A%20%20font%2Dsize%3A%201%2E2em%3B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0A%2Ereferences%20a%2Euri%20%7Bword%2Dbreak%3A%20break%2Dall%3B%7D%0A%0Anav%2Etoc%20ul%20%7B%0A%20%20list%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0A%0Anav%2Etoc%2Ealready%2Dnumbered%20ul%20%7B%0A%20%20list%2Dstyle%2Dtype%3A%20none%3B%0A%7D%0A%0Anav%2Etoc%2Ealready%2Dnumbered%20%3E%20ul%20%7B%0A%20%20padding%3A%200%3B%0A%7D%0A%0A%2F%2A%2A%0A%20%2A%20%23%23%20Print%20Styles%0A%20%2A%2F%0A%0A%40media%20print%20%7B%0A%20%20%2Eno%2Dprint%20%7B%0A%20%20%20%20display%3A%20none%3B%0A%20%20%7D%0A%0A%20%20%2A%20%7B%0A%20%20%20%20background%3A%20transparent%20%21important%3B%0A%20%20%20%20color%3A%20black%20%21important%3B%0A%20%20%20%20filter%3A%20none%20%21important%3B%0A%20%20%20%20%2Dms%2Dfilter%3A%20none%20%21important%3B%0A%20%20%7D%0A%0A%20%20body%20%7B%0A%20%20%20%20font%2Dsize%3A%2010pt%3B%0A%20%20%20%20max%2Dwidth%3A%20100%25%3B%0A%20%20%7D%0A%0A%20%20a%2C%20a%3Avisited%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%0A%20%20%7D%0A%0A%20%20hr%20%7B%0A%20%20%20%20height%3A%201px%3B%0A%20%20%20%20border%3A%200%3B%0A%20%20%20%20border%2Dbottom%3A%201px%20solid%20black%3B%0A%20%20%7D%0A%0A%20%20%2F%2Aa%5Bhref%5D%3Aafter%20%7B%0A%20%20%20%20content%3A%20%22%20%28%22%20attr%28href%29%20%22%29%22%3B%0A%20%20%7D%2A%2F%0A%0A%20%20abbr%5Btitle%5D%3Aafter%20%7B%0A%20%20%20%20content%3A%20%22%20%28%22%20attr%28title%29%20%22%29%22%3B%0A%20%20%7D%0A%0A%20%20%2Eir%20a%3Aafter%2C%20a%5Bhref%5E%3D%22javascript%3A%22%5D%3Aafter%2C%20a%5Bhref%5E%3D%22%23%22%5D%3Aafter%20%7B%0A%20%20%20%20content%3A%20%22%22%3B%0A%20%20%7D%0A%0A%20%20pre%2C%20blockquote%20%7B%0A%20%20%20%20border%3A%201px%20solid%20%23999%3B%0A%20%20%20%20padding%2Dright%3A%201em%3B%0A%20%20%20%20page%2Dbreak%2Dinside%3A%20avoid%3B%0A%20%20%7D%0A%0A%20%20tr%2C%20img%20%7B%0A%20%20%20%20page%2Dbreak%2Dinside%3A%20avoid%3B%0A%20%20%7D%0A%0A%20%20img%20%7B%0A%20%20%20%20max%2Dwidth%3A%20100%25%20%21important%3B%0A%20%20%7D%0A%0A%20%20%40page%20%3Aleft%20%7B%0A%20%20%20%20margin%3A%2025mm%2030mm%2025mm%2020mm%3B%0A%20%20%7D%0A%0A%20%20%40page%20%3Aright%20%7B%0A%20%20%20%20margin%3A%2025mm%2020mm%2025mm%2030mm%3B%0A%20%20%7D%0A%0A%20%20p%2C%20h2%2C%20h3%20%7B%0A%20%20%20%20orphans%3A%203%3B%0A%20%20%20%20widows%3A%203%3B%0A%20%20%7D%0A%0A%20%20h1%2C%20h2%2C%20h3%2C%20h4%20%7B%0A%20%20%20%20page%2Dbreak%2Dafter%3A%20avoid%3B%0A%20%20%7D%0A%7D%0A" rel="stylesheet">
</head>
<body role="document">

  <p class="no-print">
    Eine PDF-Version dieses Dokuments ist <a href="index.pdf">hier</a> verfügbar.
  </p>

<header>
  <h1 class="title">Projektgruppe Web-Technologie: EpisodeFever</h1>

  
  <div class="byline vcard">
    <address>
          <p class="author">Pascal Hertleif</p>
          <p class="author">Andreas Diesendorf</p>
        </address>
      <time pubdate="pubdate" date="1. März 2015" class="date">1. März 2015</time>
    </div>
</header>


<nav class="toc already-numbered" id="TOC">
  <h2>Inhaltsverzeichnis</h2>
  <ul>
  <li><a href="#ziele"><span class="toc-section-number">1</span> Ziele</a></li>
  <li><a href="#sec:technologien"><span class="toc-section-number">2</span> Überblick über die verwendeten Technologien</a><ul>
  <li><a href="#node.js-spezifische-module"><span class="toc-section-number">2.1</span> Node.js-spezifische Module</a></li>
  <li><a href="#module-bezüglich-code-struktur"><span class="toc-section-number">2.2</span> Module bezüglich Code-Struktur</a><ul>
  <li><a href="#promises"><span class="toc-section-number">2.2.1</span> Promises</a></li>
  <li><a href="#sec:tests-tech"><span class="toc-section-number">2.2.2</span> Tests</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#vorgehen-bei-der-projekt-umsetzung"><span class="toc-section-number">3</span> Vorgehen bei der Projekt-Umsetzung</a><ul>
  <li><a href="#informations-architektur"><span class="toc-section-number">3.1</span> Informations-Architektur</a><ul>
  <li><a href="#sec:db-schema"><span class="toc-section-number">3.1.1</span> Datenbank-Schema</a></li>
  </ul></li>
  <li><a href="#sec:struktur"><span class="toc-section-number">3.2</span> Projekt-Struktur: Verzeichnis-Struktur, Aufteilung nach Services</a><ul>
  <li><a href="#services"><span class="toc-section-number">3.2.1</span> Services</a></li>
  <li><a href="#alternativen"><span class="toc-section-number">3.2.2</span> Alternativen</a></li>
  </ul></li>
  <li><a href="#benutzer-authentifizierung"><span class="toc-section-number">3.3</span> Benutzer-Authentifizierung</a><ul>
  <li><a href="#registrierung"><span class="toc-section-number">3.3.1</span> Registrierung</a></li>
  <li><a href="#login"><span class="toc-section-number">3.3.2</span> Login</a></li>
  <li><a href="#verifizierung"><span class="toc-section-number">3.3.3</span> Verifizierung</a></li>
  </ul></li>
  <li><a href="#datenabfrage-endpunkte-für-serien-und-episoden"><span class="toc-section-number">3.4</span> Datenabfrage: Endpunkte für Serien und Episoden</a><ul>
  <li><a href="#abfragen-vieler-einträge"><span class="toc-section-number">3.4.1</span> Abfragen vieler Einträge</a></li>
  <li><a href="#sec:wrap-route"><span class="toc-section-number">3.4.2</span> Fehlerfälle abstrakt behandeln</a></li>
  <li><a href="#sec:http-errors"><span class="toc-section-number">3.4.3</span> HTTP-Antworten bei Fehlerfällen</a></li>
  <li><a href="#filterung-und-sortierung"><span class="toc-section-number">3.4.4</span> Filterung und Sortierung</a></li>
  <li><a href="#abfragen-eines-einzelnen-eintrags"><span class="toc-section-number">3.4.5</span> Abfragen eines einzelnen Eintrags</a></li>
  <li><a href="#zukünftige-episoden-als-kalender-feed"><span class="toc-section-number">3.4.6</span> Zukünftige Episoden als Kalender-Feed</a></li>
  </ul></li>
  <li><a href="#sec:tests-rest"><span class="toc-section-number">3.5</span> Testen von REST-Anfragen</a><ul>
  <li><a href="#test-daten"><span class="toc-section-number">3.5.1</span> Test-Daten</a></li>
  </ul></li>
  <li><a href="#sec:import"><span class="toc-section-number">3.6</span> Import von Daten</a><ul>
  <li><a href="#sec:import-requests"><span class="toc-section-number">3.6.1</span> XML-Daten abfragen und verarbeiten</a></li>
  <li><a href="#verwenden-der-xml-api-von-thetvdb"><span class="toc-section-number">3.6.2</span> Verwenden der XML-API von TheTVDB</a></li>
  <li><a href="#sec:import-times"><span class="toc-section-number">3.6.3</span> Datum und Zeit einer Episode auslesen</a></li>
  <li><a href="#kombination-von-thetvdb-und-tvrage"><span class="toc-section-number">3.6.4</span> Kombination von TheTVDB und TVRage</a></li>
  <li><a href="#aktualisieren-von-serien"><span class="toc-section-number">3.6.5</span> Aktualisieren von Serien</a></li>
  <li><a href="#import-automatisiert-testen"><span class="toc-section-number">3.6.6</span> Import automatisiert testen</a></li>
  </ul></li>
  <li><a href="#bewertungen-abgeben"><span class="toc-section-number">3.7</span> Bewertungen abgeben</a><ul>
  <li><a href="#motivation-auflisten-von-zukünftig-relevanten-episoden"><span class="toc-section-number">3.7.1</span> Motivation: Auflisten von zukünftig relevanten Episoden</a></li>
  <li><a href="#zuletzt-bewertete-serien-abfragen"><span class="toc-section-number">3.7.2</span> Zuletzt bewertete Serien abfragen</a></li>
  </ul></li>
  <li><a href="#suche"><span class="toc-section-number">3.8</span> Suche</a><ul>
  <li><a href="#anforderungen-an-die-suche"><span class="toc-section-number">3.8.1</span> Anforderungen an die Suche</a></li>
  <li><a href="#die-queries"><span class="toc-section-number">3.8.2</span> Die Queries</a></li>
  <li><a href="#suche-nach-episoden"><span class="toc-section-number">3.8.3</span> Suche nach Episoden</a></li>
  <li><a href="#such-indizes"><span class="toc-section-number">3.8.4</span> Such-Indizes</a></li>
  <li><a href="#sec:search-ideas"><span class="toc-section-number">3.8.5</span> Idee und Umsetzung</a></li>
  <li><a href="#beispiel-für-eine-suche"><span class="toc-section-number">3.8.6</span> Beispiel für eine Suche</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#fazit"><span class="toc-section-number">4</span> Fazit</a><ul>
  <li><a href="#rückblick"><span class="toc-section-number">4.1</span> Rückblick</a><ul>
  <li><a href="#technologie-entscheidungen"><span class="toc-section-number">4.1.1</span> Technologie-Entscheidungen</a></li>
  <li><a href="#zu-node.js-und-der-zukunft-von-javascript"><span class="toc-section-number">4.1.2</span> Zu node.js und der Zukunft von JavaScript</a></li>
  </ul></li>
  <li><a href="#sec:ausbaustufen"><span class="toc-section-number">4.2</span> Ausbaumöglichkeiten</a><ul>
  <li><a href="#zeitpunkte-für-daten-aktualisierung"><span class="toc-section-number">4.2.1</span> Zeitpunkte für Daten-Aktualisierung</a></li>
  <li><a href="#durchschnitts-bewertungen-speichern"><span class="toc-section-number">4.2.2</span> Durchschnitts-Bewertungen speichern</a></li>
  <li><a href="#empfehlungen-basierend-auf-bisherigen-bewertungen"><span class="toc-section-number">4.2.3</span> Empfehlungen basierend auf bisherigen Bewertungen</a></li>
  <li><a href="#sec:watches"><span class="toc-section-number">4.2.4</span> Benutzern das explizite Verwalten von betrachteten Serien erlauben</a></li>
  <li><a href="#server-infrastruktur"><span class="toc-section-number">4.2.5</span> Server-Infrastruktur</a></li>
  <li><a href="#analyse-von-protokoll-daten"><span class="toc-section-number">4.2.6</span> Analyse von Protokoll-Daten</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#anhang"><span class="toc-section-number">5</span> Anhang</a><ul>
  <li><a href="#sec:opensource"><span class="toc-section-number">5.1</span> Beiträge zu Open Source</a></li>
  </ul></li>
  </ul>
</nav>

<article role="main">
  <section id="ziele" class="level1">
  <h1><span class="header-section-number">1</span> Ziele</h1>
  <p>Ziel des Projekts <q>EpisodeFever</q> ist es, eine Plattform zur Bewertung von Fernseh-Serien zu erstellen.</p>
  <p>Dazu sollen Daten über Serien, Episoden, Benutzer und Bewertungen gespeichert werden. Die Daten über Serien und Episoden sollen von externen Diensten abgefragt bzw. aktualisiert werden. Es soll möglich sein, Benutzer-Konten zu erstellen und zu verwalten, als Benutzer Zugriff auf ausgewählte Daten zu haben und Bewertungen zu Episoden abzugeben.</p>
  <p>Im Rahmen des Projekts soll eine JSON-Schnittstelle erstellt werden, über welche die genannten Daten abgefragt und verändert werden können. Diese soll den Prinzipien von REST folgen <span class="citation" data-cites="fielding2000rest">[1]</span> und es ermöglichen, dass verschiedene Anwendungen darauf zugreifen.</p>
  <p>Des Weiteren soll das Projekt dazu dienen, das Team mit den verwendeten Technologien vertraut zu machen und eine effiziente Architektur für <em>node.js</em>-basierte Server-Anwendungen zu finden. Dies beinhaltet auch das Schreiben von automatisierten Tests für die implementierte Software. Durch das Programmieren wiederverwendbarer Module soll außerdem die Entwicklung zukünftiger Systeme vereinfacht werden.</p>
  </section>
  <section id="sec:technologien" class="level1">
  <h1><span class="header-section-number">2</span> Überblick über die verwendeten Technologien</h1>
  <p>Falls nichte explizit erwähnt, ist jede im weiteren Verlauf erwähnte Software unter einer OpenSource-Lizenz verfügbar (vgl. <span class="citation" data-cites="osslicenses">[2]</span>).</p>
  <p>Als Software-Plattform wurde <em>node.js</em> (<q>node</q>, <span class="citation" data-cites="nodejs">[3]</span>) gewählt<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, welches JavaScript-Applikationen ausführt und Zugriff auf System-Schnittstellen bietet. Da es auf Basis eines Event-Loop arbeitet, geschieht jeglicher Zugriff auf System-Ressourcen wie Dateisystem oder Netzwerk asynchron. Es sind sehr viele<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> mit <em>node.js</em> kompatible Bibliotheken über <em>npm</em> <span class="citation" data-cites="npm">[4]</span> verfügbar, welche leicht in eigene Software integriert werden können.</p>
  <p>Zum Speichern und Abfrage von Daten wurde <em>PostgreSQL</em> (<q>Postgres</q>, <span class="citation" data-cites="postgres">[5]</span>) ausgewählt, ein stabiles und performantes relationales Datenbanksystem. Die Alternative <em>MongoDB</em> <span class="citation" data-cites="mongodb">[6]</span>, ein Dokument-basiertes (<q>NoSQL</q>) Datenbanksystem, wurde ebenfalls betrachtet. Da die zu speichernden Daten in einem fest vorgegeben Schema vorliegen und untereinander verknüpft sind (es aber nicht sinnvoll ist, die verknüpften Daten einzubetten), erschienen mögliche Vorteile eines NoSQL-Ansatzes für nicht relevant<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>. Neuere Versionen von PostgreSQL unterstützen außerdem NoSQL-ähnliche Funktionen wie das Speichern und Abfragen von JSON-Strukturen (seit Version 9.3) sowie das Erzeugen von Volltext-Such-Indizes (seit Version 8.3). Diese Funktionen sind auch Gründe, warum nicht ein anderes SQL-Datenbanksystem wie MariaDB <span class="citation" data-cites="mariadb">[7]</span> verwendet wurde.</p>
  <section id="node.js-spezifische-module" class="level2">
  <h2><span class="header-section-number">2.1</span> Node.js-spezifische Module</h2>
  <p><em>express.js</em> in Version 4 <span class="citation" data-cites="expressjs">[8]</span> wird zur Abstraktion der über HTTP bereitgestellten Ressourcen verwendet. Mit Hilfe von <q>Middlewares</q> lassen sich HTTP-Anfragen in mehreren Stufen verarbeiten und Antworten senden. Mit express wird auch der HTTP-Server selbst gestartet.</p>
  <p>Alternativen zu <em>express.js</em> sind <em>restify</em> <span class="citation" data-cites="restify">[9]</span>, <em>Hapi</em> <span class="citation" data-cites="hapi">[10]</span> oder <em>koa</em> <span class="citation" data-cites="koa">[11]</span>, welche ebenfalls auf <em>node.js</em> aufsetzen. Ansonsten hätte man auch <em>Ruby on Rails</em> (Ruby, <span class="citation" data-cites="rails">[12]</span>), <em>Django</em> (Python, <span class="citation" data-cites="django">[13]</span>), <em>Laravel</em> (PHP, <span class="citation" data-cites="laravel">[14]</span>) oder <em>Martini</em> (Go, <span class="citation" data-cites="martini">[15]</span>) wählen können. Express wurde ausgewählt, da es weit verbreitet ist (weshalb viele daran angepasste Module und Dokumentation verfügbar sind) und es seit Version 4 möglich ist, Applikationen aus mehreren <em>Router</em>-Instanzen zusammenzusetzen (was modulare Applikationen ermöglicht).</p>
  <p>Um Zugriffe auf die Datenbank zu vereinfachen und ausgelesene Daten direkt verarbeiten zu können, wird <em>bookshelf.js</em> <span class="citation" data-cites="bookshelf">[16]</span> eingesetzt. Dieses erlaubt es, Datenbank-Inhalt wie JavaScript-Objekte zu verwenden und Relationen im Code abzubilden. Intern wird <em>knex.js</em> <span class="citation" data-cites="knex">[17]</span> verwendet, um SQL-Abfragen zu generieren und Schema-Migrationen durchzuführen. Alternative hierzu ist vor allem <em>mongoose</em> <span class="citation" data-cites="mongoose">[18]</span>, wäre statt PostgreSQL MongoDB gewählt worden.</p>
  </section>
  <section id="module-bezüglich-code-struktur" class="level2">
  <h2><span class="header-section-number">2.2</span> Module bezüglich Code-Struktur</h2>
  <section id="promises" class="level3">
  <h3><span class="header-section-number">2.2.1</span> Promises</h3>
  <p>Ebenso wie die in <em>node.js</em> integrierten Module, verwenden auch viele externe Bibliotheken <em>Callbacks</em>, um Rückgabewerte asynchroner Schnittstellen zu übertragen. Dies führt bei vielen voneinander abhängigen Aufrufen zu Software, deren Programmfluss auf Grund von ineinander verschachtelten Funktionsaufrufen schwer nachzuvollziehen muss. Ebenso ist das Behandeln aller Fehlerfälle in solchen Programmen oft komplex.</p>
  <p>Viele dieser Probleme werden durch den Einsatz von Promises <span class="citation" data-cites="promisesaplus">[19]</span> gelöst. Die Standard-konforme Implementierung <em>bluebird</em> <span class="citation" data-cites="bluebird">[20]</span> wird in EpisodeFever verwendet, da sie sehr performant ist <span class="citation" data-cites="promiseperformance">[21]</span> und viele Hilfsfunktionen mitliefert (um beispielsweise in <em>node</em> integrierte Module mit Promises zu verwenden).</p>
  </section>
  <section id="sec:tests-tech" class="level3">
  <h3><span class="header-section-number">2.2.2</span> Tests</h3>
  <p>Das Schreiben und Ausführen von automatisierten Tests wird durch <em>mocha</em> ermöglicht, einem Test-Framework, welches mit dem von Ruby bekannten <em>rspec</em> <span class="citation" data-cites="rspec">[22]</span> vergleichbar ist. Alternativen sind <em>Jasmine</em> <span class="citation" data-cites="jasmine">[23]</span> oder <em>Vows</em> <span class="citation" data-cites="vowsjs">[24]</span>.</p>
  <p>Alle drei verwenden die für Behavior-driven Development <span class="citation" data-cites="solis2011study">[25]</span> typischen Bezeichnungen (Tests sind Blöcke mit den Funktionen <code>describe</code> und <code>it</code>). Während <em>Jasmine</em> sich sehr ähnlich zu <em>mocha</em> verhält und ähnliche Interfaces bietet, ist es nicht so mächtig; es fehlt beispielsweise die Unterstützung Promises als Rückgabewerte von Tests auszuwerten, was asynchrone Tests sehr verkürzt. <em>Vows</em> fokussiert sich auf asynchrone Tests, die parallel ausgeführt werden können. Dies scheint für Unit-Tests hilfreich zu sein, bei Integrationstests wie dem Abfragen einer REST-API und dem Überprüfen von Datenbank-Inhalten führt dies aber dazu, dass Abhängigkeiten von Tests explizit angebeben werden müssen.</p>
  <p>Die Bibliothek <em>chai.js</em> <span class="citation" data-cites="chai">[26]</span> bietet eine Vielzahl von Hilfs-Funktionen, mit welchen Werte von Objekten überprüft werden können. Da im Projekt nur die Funktionen basierend auf <code>expect</code> verwendet werden, wurde zunächst überlegt, das minimlistische Modul <em>expect.js</em> <span class="citation" data-cites="expectjs">[27]</span> zu verwenden. Letztendlich bietet <em>chai.js</em> jedoch mehr Funktionen, wird aktivier entwickelt und hat eine Schnittstelle für Erweiterungen (sodass beispielsweise die Datentypen von <em>bookshelf</em> einfacher geprüft werden können).</p>
  <p>Um Anfragen an den zu testenden Teil des Servers zu simulieren, wurde <em>supertest</em> <span class="citation" data-cites="supertest">[28]</span> eingesetzt. <em>Supertest</em> basiert auf <em>superagent</em> <span class="citation" data-cites="superagent">[29]</span>, welches schon für den Zugriff auf externe APIs verwendet wird, wie in <a href="#sec:import-requests"><q>XML-Daten abfragen und verarbeiten</q></a> beschrieben. <em>Supertest</em> bietet einfache Möglichkeiten zur Überprüfung von HTTP-Antworten. Es wurde um die Verwendung von <em>Promises</em> erweitert, sodass asynchrone Tests einfach zu schreiben sind. (Ist der Rückgabe-Wert eines Tests ein Promise, wird dieses von <em>mocha</em> automatisch ausgewertet.)</p>
  </section>
  </section>
  </section>
  <section id="vorgehen-bei-der-projekt-umsetzung" class="level1">
  <h1><span class="header-section-number">3</span> Vorgehen bei der Projekt-Umsetzung</h1>
  <section id="informations-architektur" class="level2">
  <h2><span class="header-section-number">3.1</span> Informations-Architektur</h2>
  <p>EpisodeFever soll sowohl <em>Serien-</em> als auch <em>Episoden</em>-Daten umfassen. Zusätzlich soll es <em>Benutzer</em> geben, welche <em>Bewertungen</em> anlegen können. Diese vier Entitäten sollen über die API verfügbar sein.</p>
  <p>Serien und Episoden können nur gelesen werden; Aktualisierung dieser Daten findet über das <a href="#sec:import">Import-Modul</a> statt. Benutzer können erstellt und (eingeschränkt) bearbeitet werden. Zudem können Benutzer pro Episode eine Bewertung abgeben.</p>
  <section id="sec:db-schema" class="level3">
  <h3><span class="header-section-number">3.1.1</span> Datenbank-Schema</h3>
  <p>Aus den Ansprüchen an die API lässt sich ableiten, welche Daten zur Verfügung stehen müssen. Daraus lässt sich wiederum ein Datenbank-Schema entwerfen. Dieses sollte normalisiert und erweiterbar sein <span class="citation" data-cites="kleinschmidt2005relationale">[30 S. 75–81]</span>.</p>
  <p>Wie <a href="#sec:technologien">oben</a> erwähnt, wurde als Alternative zu einer SQL-Datenbank auch die NoSQL-Datenbank MongoDB in Betracht gezogen. Diese eignet sich besonders, wenn zu bestimmten Datensätzen immer zusätzliche Relationen ausgelesen werden. Würden beispielsweise zu Serien immer alle Episoden geladen werden, könnte man in MongoDB die Episoden in das Serien-Dokument einbetten.</p>
  <p>In EpisodeFever ist dies aber nicht gegeben. Episoden sollten keine eingebetteten Dokumente sein, da es möglich sein soll, die in den nächsten Tagen ausgestrahlten Episoden leicht zu bestimmen. Ebenso können Bewertungen nicht problemlos in andere Dokument eingebettet werden (z.B. als Teil der bewerteten Episode oder des bewertenden Benutzers), da man sie im Kontext eines Benutzers, einer Episode oder einer Serie abfragen können soll. Aus diesen Gründen erschien eine SQL-Datenbank die bessere Wahl zu sein.</p>
  <p>Das Diagramm <a href="#fig:database-schema"><q>EpisodeFevers Datenbankschema</q></a> stellt das verwendete Schema als gerichteten Graphen dar. Verbindung zwischen Feldern symbolisieren Relationen zwischen Tabellen (mit Foreign Keys). Die Episoden-Tabelle beinhaltet z.B. eine Referenz auf einen Eintrag der Serien-Tabelle.</p>
  <p>Zu den vier abgebildeten Tabellen existiert auch noch eine <code>knex_migrations</code>-Tabelle. Diese wird von <em>knex</em> <span class="citation" data-cites="knex">[17]</span> automatisch angelegt und gefüllt, um festzuhalten, welche Schema-Migrationen in dieser Datenbank bereits durchgeführt wurden.</p>
  <section id="fig:database-schema">
  <figure>
  <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuMzguMCAoMjAxNDA0MTMuMjA0MSkKIC0tPgo8IS0tIFRpdGxlOiBFcGlzb2RlRmV2ZXIgRGF0YWJhc2UgU2NoZW1hIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSI1MTRwdCIgaGVpZ2h0PSIyNjZwdCIKIHZpZXdCb3g9IjcuMjAgNy4yMCA1MDcuMTggMjU5LjIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDAuNTM4NDYyIDAuNTM4NDYyKSByb3RhdGUoMCkgdHJhbnNsYXRlKDE3LjM3MTQgNDc3LjM3MSkiPgo8dGl0bGU+RXBpc29kZUZldmVyIERhdGFiYXNlIFNjaGVtYTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IndoaXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iLTQsNCAtNCwtNDY0IDkyNC41MjksLTQ2NCA5MjQuNTI5LDQgLTQsNCIvPgo8IS0tIFVzZXIgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5Vc2VyPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5Mi4wMzk2LC0yNjEuNSA5Mi4wMzk2LC00NTkuNSAyMDcuOTYsLTQ1OS41IDIwNy45NiwtMjYxLjUgOTIuMDM5NiwtMjYxLjUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTUwIiB5PSItNDQ0LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VVNFUjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iOTIuMDM5NiwtNDM3LjUgMjA3Ljk2LC00MzcuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTUwIiB5PSItNDIyLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+aWQ8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjkyLjAzOTYsLTQxNS41IDIwNy45NiwtNDE1LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1MCIgeT0iLTQwMC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPk5hbWU8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjkyLjAzOTYsLTM5My41IDIwNy45NiwtMzkzLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1MCIgeT0iLTM3OC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkVNYWlsPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5Mi4wMzk2LC0zNzEuNSAyMDcuOTYsLTM3MS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNTAiIHk9Ii0zNTYuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5QYXNzd29yZDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iOTIuMDM5NiwtMzQ5LjUgMjA3Ljk2LC0zNDkuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTUwIiB5PSItMzM0LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VmVyaWZpZWQ8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjkyLjAzOTYsLTMyNy41IDIwNy45NiwtMzI3LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1MCIgeT0iLTMxMi4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlZlcmlmaWNhdGlvbiB0b2tlbjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iOTIuMDM5NiwtMzA1LjUgMjA3Ljk2LC0zMDUuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTUwIiB5PSItMjkwLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+Q3JlYXRlZCBhdDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iOTIuMDM5NiwtMjgzLjUgMjA3Ljk2LC0yODMuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTUwIiB5PSItMjY4LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VXBkYXRlZCBhdDwvdGV4dD4KPC9nPgo8IS0tIFNob3cgLS0+CjxnIGlkPSJub2RlMiIgY2xhc3M9Im5vZGUiPjx0aXRsZT5TaG93PC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMDIuOTI2LC0wLjUgMTAyLjkyNiwtMjQyLjUgMTk3LjA3NCwtMjQyLjUgMTk3LjA3NCwtMC41IDEwMi45MjYsLTAuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNTAiIHk9Ii0yMjcuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5TSE9XPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMDIuOTI2LC0yMjAuNSAxOTcuMDc0LC0yMjAuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTUwIiB5PSItMjA1LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+aWQ8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwMi45MjYsLTE5OC41IDE5Ny4wNzQsLTE5OC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNTAiIHk9Ii0xODMuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5OYW1lPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMDIuOTI2LC0xNzYuNSAxOTcuMDc0LC0xNzYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTUwIiB5PSItMTYxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+RGVzY3JpcHRpb248L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwMi45MjYsLTE1NC41IDE5Ny4wNzQsLTE1NC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNTAiIHk9Ii0xMzkuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5SdW5uaW5nPzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTAyLjkyNiwtMTMyLjUgMTk3LjA3NCwtMTMyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1MCIgeT0iLTExNy4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlRoZVRWREIgSUQ8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwMi45MjYsLTExMC41IDE5Ny4wNzQsLTExMC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNTAiIHk9Ii05NS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlRWUmFnZSBJRDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTAyLjkyNiwtODguNSAxOTcuMDc0LC04OC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNTAiIHk9Ii03My4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlBvc3RlcjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTAyLjkyNiwtNjYuNSAxOTcuMDc0LC02Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNTAiIHk9Ii01MS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPldhbGxwYXBlcjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTAyLjkyNiwtNDQuNSAxOTcuMDc0LC00NC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNTAiIHk9Ii0yOS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkNyZWF0ZWQgYXQ8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwMi45MjYsLTIyLjUgMTk3LjA3NCwtMjIuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTUwIiB5PSItNy4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlVwZGF0ZWQgYXQ8L3RleHQ+CjwvZz4KPCEtLSBFcGlzb2RlIC0tPgo8ZyBpZD0ibm9kZTMiIGNsYXNzPSJub2RlIj48dGl0bGU+RXBpc29kZTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDY1Ljg3NCwtMTEwLjUgNDY1Ljg3NCwtMzMwLjUgNTU2LjEyNiwtMzMwLjUgNTU2LjEyNiwtMTEwLjUgNDY1Ljg3NCwtMTEwLjUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTExIiB5PSItMzE1LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+RVBJU09ERTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDY1Ljg3NCwtMzA4LjUgNTU2LjEyNiwtMzA4LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUxMSIgeT0iLTI5My4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPmlkPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0NjUuODc0LC0yODYuNSA1NTYuMTI2LC0yODYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTExIiB5PSItMjcxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+TmFtZTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDY1Ljg3NCwtMjY0LjUgNTU2LjEyNiwtMjY0LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUxMSIgeT0iLTI0OS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkRlc2NyaXB0aW9uPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0NjUuODc0LC0yNDIuNSA1NTYuMTI2LC0yNDIuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTExIiB5PSItMjI3LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+QWlyIGRhdGUvdGltZTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDY1Ljg3NCwtMjIwLjUgNTU2LjEyNiwtMjIwLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUxMSIgeT0iLTIwNS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlNob3c8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ2NS44NzQsLTE5OC41IDU1Ni4xMjYsLTE5OC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1MTEiIHk9Ii0xODMuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5TZWFzb248L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ2NS44NzQsLTE3Ni41IDU1Ni4xMjYsLTE3Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1MTEiIHk9Ii0xNjEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5OdW1iZXI8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ2NS44NzQsLTE1NC41IDU1Ni4xMjYsLTE1NC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1MTEiIHk9Ii0xMzkuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5DcmVhdGVkIGF0PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0NjUuODc0LC0xMzIuNSA1NTYuMTI2LC0xMzIuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTExIiB5PSItMTE3LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VXBkYXRlZCBhdDwvdGV4dD4KPC9nPgo8IS0tIEVwaXNvZGUmIzQ1OyZndDtTaG93IC0tPgo8ZyBpZD0iZWRnZTEiIGNsYXNzPSJlZGdlIj48dGl0bGU+RXBpc29kZTpzaG93X2lkJiM0NTsmZ3Q7U2hvdzppZDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik00NjUuODc0LC0yMDkuNUMzNTAuMzA3LC0yMDkuNSAzMTguODc2LC0yMDkuNSAyMDguMjM4LC0yMDkuNSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyMDgsLTIwNiAxOTgsLTIwOS41IDIwOCwtMjEzIDIwOCwtMjA2Ii8+CjwvZz4KPCEtLSBWb3RlIC0tPgo8ZyBpZD0ibm9kZTQiIGNsYXNzPSJub2RlIj48dGl0bGU+Vm90ZTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzgyLjQ4NCwtMjgyLjUgNzgyLjQ4NCwtNDM2LjUgODU5LjUxNiwtNDM2LjUgODU5LjUxNiwtMjgyLjUgNzgyLjQ4NCwtMjgyLjUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iODIxIiB5PSItNDIxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+Vk9URTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzgyLjQ4NCwtNDE0LjUgODU5LjUxNiwtNDE0LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjgyMSIgeT0iLTM5OS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlJhdGluZzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzgyLjQ4NCwtMzkyLjUgODU5LjUxNiwtMzkyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjgyMSIgeT0iLTM3Ny4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlVzZXI8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc4Mi40ODQsLTM3MC41IDg1OS41MTYsLTM3MC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI4MjEiIHk9Ii0zNTUuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5TaG93PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3ODIuNDg0LC0zNDguNSA4NTkuNTE2LC0zNDguNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iODIxIiB5PSItMzMzLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+RXBpc29kZTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzgyLjQ4NCwtMzI2LjUgODU5LjUxNiwtMzI2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjgyMSIgeT0iLTMxMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkNyZWF0ZWQgYXQ8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc4Mi40ODQsLTMwNC41IDg1OS41MTYsLTMwNC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI4MjEiIHk9Ii0yODkuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5VcGRhdGVkIGF0PC90ZXh0Pgo8L2c+CjwhLS0gVm90ZSYjNDU7Jmd0O1VzZXIgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5Wb3RlOnVzZXJfaWQmIzQ1OyZndDtVc2VyOmlkPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTc4Mi40ODQsLTM4MS41QzUyOS43MzUsLTM4MS41IDQ2NS43NjIsLTQyNS4zMjEgMjE3Ljk5LC00MjYuNDc3Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIxNy45NTIsLTQyMi45NzcgMjA3Ljk2LC00MjYuNSAyMTcuOTY5LC00MjkuOTc3IDIxNy45NTIsLTQyMi45NzciLz4KPC9nPgo8IS0tIFZvdGUmIzQ1OyZndDtTaG93IC0tPgo8ZyBpZD0iZWRnZTMiIGNsYXNzPSJlZGdlIj48dGl0bGU+Vm90ZTpzaG93X2lkJiM0NTsmZ3Q7U2hvdzppZDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik03ODIuNDg0LC0zNTkuNUM2NDEuNTE2LC0zNTkuNSA2MDIuMTk5LC0zNzYuMzg0IDQ2NS44NzQsLTM0MC41IDM0MS4wOSwtMzA3LjY1MyAzMzAuOTkyLC0yMTQuNTg1IDIwOC4yMjYsLTIwOS43Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIwOC4wNjcsLTIwNi4xOTYgMTk4LC0yMDkuNSAyMDcuOTMsLTIxMy4xOTUgMjA4LjA2NywtMjA2LjE5NiIvPgo8L2c+CjwhLS0gVm90ZSYjNDU7Jmd0O0VwaXNvZGUgLS0+CjxnIGlkPSJlZGdlNCIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5Wb3RlOmVwaXNvZGVfaWQmIzQ1OyZndDtFcGlzb2RlOmlkPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTc4Mi40ODQsLTMzNy41QzY4My44MTQsLTMzNy41IDY1OS44ODgsLTMwMC4xODggNTY2LjMyNywtMjk3LjYzNyIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI1NjYuMTcyLC0yOTQuMTM1IDU1Ni4xMjYsLTI5Ny41IDU2Ni4wNzgsLTMwMS4xMzQgNTY2LjE3MiwtMjk0LjEzNSIvPgo8L2c+CjwvZz4KPC9zdmc+Cg==" alt="EpisodeFevers Datenbankschema" /><figcaption>EpisodeFevers Datenbankschema</figcaption>
  </figure>
  </section>
  </section>
  </section>
  <section id="sec:struktur" class="level2">
  <h2><span class="header-section-number">3.2</span> Projekt-Struktur: Verzeichnis-Struktur, Aufteilung nach Services</h2>
  <p>Zu Beginn des Projektes wurde neben der Informationsarchitektur auch beschlossen, wie die Code-Struktur sein soll. Diese lässt sich gut durch die <a href="#fig:code-structure">verwendete Verzeichnisstruktur</a> darstellen.</p>
  <section id="fig:code-structure">
  <figure>
  <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuMzguMCAoMjAxNDA0MTMuMjA0MSkKIC0tPgo8IS0tIFRpdGxlOiBDb2RlIFN0cnVrdHVyIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSI1OTBwdCIgaGVpZ2h0PSIzNTdwdCIKIHZpZXdCb3g9IjAuMDAgMC4wMCA1OTAuMTggMzU3LjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDM1MykiPgo8dGl0bGU+Q29kZSBTdHJ1a3R1cjwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IndoaXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iLTQsNCAtNCwtMzUzIDU4Ni4xNzYsLTM1MyA1ODYuMTc2LDQgLTQsNCIvPgo8ZyBpZD0iY2x1c3Q4IiBjbGFzcz0iY2x1c3RlciI+PHRpdGxlPmNsdXN0ZXJTZXJ2aWNlPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibGlnaHRncmV5IiBzdHJva2U9ImxpZ2h0Z3JleSIgcG9pbnRzPSI0NzkuMzgzLC04IDQ3OS4zODMsLTE5MCA1NzIuODE0LC0xOTAgNTcyLjgxNCwtOCA0NzkuMzgzLC04Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjU0My44MjQiIHk9Ii0xNzQuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5TZXJ2aWNlPC90ZXh0Pgo8L2c+CjwhLS0gZGIgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5kYjwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTU3Ljc3MywtMTczIDExLjg1MzksLTE3MyAxMS44NTM5LC0xMzcgMTU3Ljc3MywtMTM3IDE1Ny43NzMsLTE3MyIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI4NC44MTM2IiB5PSItMTUwLjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+RGF0YWJhc2UgY29uZmlndXJhdGlvbjwvdGV4dD4KPC9nPgo8IS0tIHNlcnZlciAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+PHRpdGxlPnNlcnZlcjwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTExLjgxNCwtMjI3IDU3LjgxMzYsLTIyNyA1Ny44MTM2LC0xOTEgMTExLjgxNCwtMTkxIDExMS44MTQsLTIyNyIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI4NC44MTM2IiB5PSItMjA0LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+U2VydmVyPC90ZXh0Pgo8L2c+CjwhLS0gaGVscGVycyAtLT4KPGcgaWQ9Im5vZGU2IiBjbGFzcz0ibm9kZSI+PHRpdGxlPmhlbHBlcnM8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI4My4zNTMsLTI0MSAyMjQuMjc0LC0yNDEgMjI0LjI3NCwtMjA1IDI4My4zNTMsLTIwNSAyODMuMzUzLC0yNDEiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjUzLjgxNCIgeT0iLTIxOC44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkhlbHBlcnM8L3RleHQ+CjwvZz4KPCEtLSBzZXJ2ZXImIzQ1OyZndDtoZWxwZXJzIC0tPgo8ZyBpZD0iZWRnZTMiIGNsYXNzPSJlZGdlIj48dGl0bGU+c2VydmVyJiM0NTsmZ3Q7aGVscGVyczwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xMTEuOTA3LC0yMTEuMTg4QzEzOS4yNywtMjEzLjQ4MSAxODIuNTc1LC0yMTcuMTEyIDIxMy45NTksLTIxOS43NDMiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjEzLjg0OCwtMjIzLjI0NiAyMjQuMTA1LC0yMjAuNTkzIDIxNC40MzMsLTIxNi4yNyAyMTMuODQ4LC0yMjMuMjQ2Ii8+CjwvZz4KPCEtLSBzZXJ2aWNlcyAtLT4KPGcgaWQ9Im5vZGU3IiBjbGFzcz0ibm9kZSI+PHRpdGxlPnNlcnZpY2VzPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyODUuNzQzLC0xODcgMjIxLjg4NCwtMTg3IDIyMS44ODQsLTE1MSAyODUuNzQzLC0xNTEgMjg1Ljc0MywtMTg3Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI1My44MTQiIHk9Ii0xNjQuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5TZXJ2aWNlczwvdGV4dD4KPC9nPgo8IS0tIHNlcnZlciYjNDU7Jmd0O3NlcnZpY2VzIC0tPgo8ZyBpZD0iZWRnZTQiIGNsYXNzPSJlZGdlIj48dGl0bGU+c2VydmVyJiM0NTsmZ3Q7c2VydmljZXM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTExLjkwNywtMjAyLjc1QzEzOC42OTMsLTE5Ni4zMzQgMTgwLjc1NiwtMTg2LjI1OSAyMTEuOTU4LC0xNzguNzg2Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIxMy4xNzYsLTE4Mi4wOTMgMjIyLjA4NiwtMTc2LjM2IDIxMS41NDYsLTE3NS4yODYgMjEzLjE3NiwtMTgyLjA5MyIvPgo8L2c+CjwhLS0gaW1wb3J0IC0tPgo8ZyBpZD0ibm9kZTMiIGNsYXNzPSJub2RlIj48dGl0bGU+aW1wb3J0PC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMjYuNTczLC0zMDggNDMuMDU0NCwtMzA4IDQzLjA1NDQsLTI3MiAxMjYuNTczLC0yNzIgMTI2LjU3MywtMzA4Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9Ijg0LjgxMzYiIHk9Ii0yODUuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5EYXRhIGltcG9ydDwvdGV4dD4KPC9nPgo8IS0tIGFwaXMgLS0+CjxnIGlkPSJub2RlNCIgY2xhc3M9Im5vZGUiPjx0aXRsZT5hcGlzPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyODAuODE0LC0zNDkgMjI2LjgxNCwtMzQ5IDIyNi44MTQsLTMxMyAyODAuODE0LC0zMTMgMjgwLjgxNCwtMzQ5Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI1My44MTQiIHk9Ii0zMjYuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5BUElzPC90ZXh0Pgo8L2c+CjwhLS0gaW1wb3J0JiM0NTsmZ3Q7YXBpcyAtLT4KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+PHRpdGxlPmltcG9ydCYjNDU7Jmd0O2FwaXM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTI2LjY2NiwtMzAwLjAzQzE1NC4xMTYsLTMwNi43NjkgMTg5Ljk3LC0zMTUuNTcxIDIxNi40MzYsLTMyMi4wNjkiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjE1Ljg5MSwtMzI1LjUzOSAyMjYuNDM3LC0zMjQuNTI0IDIxNy41NiwtMzE4Ljc0MSAyMTUuODkxLC0zMjUuNTM5Ii8+CjwvZz4KPCEtLSBhcGlfdGVzdHMgLS0+CjxnIGlkPSJub2RlNSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5hcGlfdGVzdHM8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI4OS4yMDEsLTI5NSAyMTguNDI2LC0yOTUgMjE4LjQyNiwtMjU5IDI4OS4yMDEsLTI1OSAyODkuMjAxLC0yOTUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjUzLjgxNCIgeT0iLTI3Mi44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkFQSSBUZXN0czwvdGV4dD4KPC9nPgo8IS0tIGltcG9ydCYjNDU7Jmd0O2FwaV90ZXN0cyAtLT4KPGcgaWQ9ImVkZ2UyIiBjbGFzcz0iZWRnZSI+PHRpdGxlPmltcG9ydCYjNDU7Jmd0O2FwaV90ZXN0czwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xMjYuNjY2LC0yODYuODJDMTUxLjQ0OCwtMjg0Ljg5MSAxODMuMDgxLC0yODIuNDI4IDIwOC40NywtMjgwLjQ1MiIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyMDguODc2LC0yODMuOTMxIDIxOC41NzUsLTI3OS42NjUgMjA4LjMzMywtMjc2Ljk1MiAyMDguODc2LC0yODMuOTMxIi8+CjwvZz4KPCEtLSBhdXRoIC0tPgo8ZyBpZD0ibm9kZTgiIGNsYXNzPSJub2RlIj48dGl0bGU+YXV0aDwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDM4LjU3MywtMjk1IDM0NS4wNTQsLTI5NSAzNDUuMDU0LC0yNTkgNDM4LjU3MywtMjU5IDQzOC41NzMsLTI5NSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzOTEuODE0IiB5PSItMjcyLjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+QXV0aG9yaXphdGlvbjwvdGV4dD4KPC9nPgo8IS0tIHNlcnZpY2VzJiM0NTsmZ3Q7YXV0aCAtLT4KPGcgaWQ9ImVkZ2U1IiBjbGFzcz0iZWRnZSI+PHRpdGxlPnNlcnZpY2VzJiM0NTsmZ3Q7YXV0aDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0yNzguNjA4LC0xODcuMjlDMjgyLjE0MSwtMTkwLjE0OSAyODUuNzAzLC0xOTMuMTEzIDI4OS4wMDcsLTE5NiAzMTUuMDI2LC0yMTguNzM0IDMxNy40MjYsLTIyOS4wOTIgMzQ0LjkzNCwtMjUwIDM0Ni4zLC0yNTEuMDM4IDM0Ny43MDksLTI1Mi4wNjggMzQ5LjE0OCwtMjUzLjA4NCIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIzNDcuMzU4LC0yNTYuMDk4IDM1Ny42MTksLTI1OC43MzggMzUxLjI0NCwtMjUwLjI3NSAzNDcuMzU4LC0yNTYuMDk4Ii8+CjwvZz4KPCEtLSB1c2VycyAtLT4KPGcgaWQ9Im5vZGU5IiBjbGFzcz0ibm9kZSI+PHRpdGxlPnVzZXJzPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0MTguODE0LC0yNDEgMzY0LjgxNCwtMjQxIDM2NC44MTQsLTIwNSA0MTguODE0LC0yMDUgNDE4LjgxNCwtMjQxIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM5MS44MTQiIHk9Ii0yMTguOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5Vc2VyczwvdGV4dD4KPC9nPgo8IS0tIHNlcnZpY2VzJiM0NTsmZ3Q7dXNlcnMgLS0+CjxnIGlkPSJlZGdlNiIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5zZXJ2aWNlcyYjNDU7Jmd0O3VzZXJzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTI4NS42NzQsLTE4MS4yNTNDMzA2LjMzNCwtMTg5LjQ1NyAzMzMuNTkzLC0yMDAuMjggMzU1LjE3OCwtMjA4Ljg1MSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIzNTQuMDY2LC0yMTIuMTc1IDM2NC42NTIsLTIxMi42MTIgMzU2LjY0OSwtMjA1LjY2OSAzNTQuMDY2LC0yMTIuMTc1Ii8+CjwvZz4KPCEtLSBzaG93cyAtLT4KPGcgaWQ9Im5vZGUxMCIgY2xhc3M9Im5vZGUiPjx0aXRsZT5zaG93czwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDE4LjgxNCwtMTg3IDM2NC44MTQsLTE4NyAzNjQuODE0LC0xNTEgNDE4LjgxNCwtMTUxIDQxOC44MTQsLTE4NyIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzOTEuODE0IiB5PSItMTY0LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+U2hvd3M8L3RleHQ+CjwvZz4KPCEtLSBzZXJ2aWNlcyYjNDU7Jmd0O3Nob3dzIC0tPgo8ZyBpZD0iZWRnZTciIGNsYXNzPSJlZGdlIj48dGl0bGU+c2VydmljZXMmIzQ1OyZndDtzaG93czwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0yODUuNjc0LC0xNjlDMzA2LjE0OCwtMTY5IDMzMy4xMDMsLTE2OSAzNTQuNTkzLC0xNjkiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMzU0LjY1MiwtMTcyLjUgMzY0LjY1MiwtMTY5IDM1NC42NTIsLTE2NS41IDM1NC42NTIsLTE3Mi41Ii8+CjwvZz4KPCEtLSBlcGlzb2RlcyAtLT4KPGcgaWQ9Im5vZGUxMSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5lcGlzb2RlczwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDI0Ljg2NywtMTMzIDM1OC43NiwtMTMzIDM1OC43NiwtOTcgNDI0Ljg2NywtOTcgNDI0Ljg2NywtMTMzIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM5MS44MTQiIHk9Ii0xMTAuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5FcGlzb2RlczwvdGV4dD4KPC9nPgo8IS0tIHNlcnZpY2VzJiM0NTsmZ3Q7ZXBpc29kZXMgLS0+CjxnIGlkPSJlZGdlOCIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5zZXJ2aWNlcyYjNDU7Jmd0O2VwaXNvZGVzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTI4NS42NzQsLTE1Ni43NDdDMzA0LjQ4MiwtMTQ5LjI3OSAzMjguNzU5LC0xMzkuNjM5IDM0OS4yNDUsLTEzMS41MDUiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMzUwLjY1NCwtMTM0LjcxMiAzNTguNjU2LC0xMjcuNzY4IDM0OC4wNywtMTI4LjIwNiAzNTAuNjU0LC0xMzQuNzEyIi8+CjwvZz4KPCEtLSB2b3RlcyAtLT4KPGcgaWQ9Im5vZGUxMiIgY2xhc3M9Im5vZGUiPjx0aXRsZT52b3RlczwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDE4LjgxNCwtNzkgMzY0LjgxNCwtNzkgMzY0LjgxNCwtNDMgNDE4LjgxNCwtNDMgNDE4LjgxNCwtNzkiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzkxLjgxNCIgeT0iLTU2LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+Vm90ZXM8L3RleHQ+CjwvZz4KPCEtLSBzZXJ2aWNlcyYjNDU7Jmd0O3ZvdGVzIC0tPgo8ZyBpZD0iZWRnZTkiIGNsYXNzPSJlZGdlIj48dGl0bGU+c2VydmljZXMmIzQ1OyZndDt2b3RlczwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0yNzIuODY3LC0xNTAuNzgzQzI5MC40MjgsLTEzMy41NTcgMzE4LjI4NiwtMTA3LjUxMiAzNDQuOTM0LC04OCAzNDguMzc0LC04NS40ODE1IDM1Mi4wNjMsLTgyLjk5NDEgMzU1LjgwMSwtODAuNjA4MiIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIzNTcuODIzLC04My40NzM0IDM2NC41MTUsLTc1LjI1ODggMzU0LjE2MSwtNzcuNTA3OCAzNTcuODIzLC04My40NzM0Ii8+CjwvZz4KPCEtLSBtb2RlbC5qcyAtLT4KPGcgaWQ9Im5vZGUxMyIgY2xhc3M9Im5vZGUiPjx0aXRsZT5tb2RlbC5qczwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IndoaXRlIiBzdHJva2U9IndoaXRlIiBwb2ludHM9IjU1Ny42NDUsLTE2MCA0OTMuOTgyLC0xNjAgNDkzLjk4MiwtMTI0IDU1Ny42NDUsLTEyNCA1NTcuNjQ1LC0xNjAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTI1LjgxNCIgeT0iLTEzNy44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPm1vZGVsLmpzPC90ZXh0Pgo8L2c+CjwhLS0gdXNlcnMmIzQ1OyZndDttb2RlbC5qcyAtLT4KPGcgaWQ9ImVkZ2UxMCIgY2xhc3M9ImVkZ2UiPjx0aXRsZT51c2VycyYjNDU7Jmd0O21vZGVsLmpzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTQxOS4wOTIsLTIwNy43MDZDNDI1LjUyNCwtMjAzLjkxNiA0MzIuMzc0LC0xOTkuODM5IDQzOC42OTMsLTE5NiA0NDkuMTM0LC0xODkuNjU2IDQ2MC4yMjUsLTE4Mi43OTUgNDcwLjg1MiwtMTc2LjE1OSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0NzMuMDI2LC0xNzguOTI4IDQ3OS42NDUsLTE3MC42NTUgNDY5LjMxMSwtMTcyLjk5NCA0NzMuMDI2LC0xNzguOTI4Ii8+CjwvZz4KPCEtLSBzaG93cyYjNDU7Jmd0O21vZGVsLmpzIC0tPgo8ZyBpZD0iZWRnZTExIiBjbGFzcz0iZWRnZSI+PHRpdGxlPnNob3dzJiM0NTsmZ3Q7bW9kZWwuanM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNNDE4Ljg5MywtMTYzLjY2NkM0MzMuMzY1LC0xNjAuNzA1IDQ1MS45MzksLTE1Ni45MDYgNDY5LjQ4LC0xNTMuMzE4Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ3MC41NTUsLTE1Ni42NzEgNDc5LjY1LC0xNTEuMjM4IDQ2OS4xNTIsLTE0OS44MTMgNDcwLjU1NSwtMTU2LjY3MSIvPgo8L2c+CjwhLS0gZXBpc29kZXMmIzQ1OyZndDttb2RlbC5qcyAtLT4KPGcgaWQ9ImVkZ2UxMiIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5lcGlzb2RlcyYjNDU7Jmd0O21vZGVsLmpzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTQyNS4xMDQsLTEyMS42MDVDNDM4LjUxLC0xMjQuMzQ3IDQ1NC40NTIsLTEyNy42MDggNDY5LjYxMywtMTMwLjcwOSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0NjguOTI5LC0xMzQuMTQyIDQ3OS40MjgsLTEzMi43MTcgNDcwLjMzMiwtMTI3LjI4NCA0NjguOTI5LC0xMzQuMTQyIi8+CjwvZz4KPCEtLSB2b3RlcyYjNDU7Jmd0O21vZGVsLmpzIC0tPgo8ZyBpZD0iZWRnZTEzIiBjbGFzcz0iZWRnZSI+PHRpdGxlPnZvdGVzJiM0NTsmZ3Q7bW9kZWwuanM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNNDE5LjA5MiwtNzYuMjkzOEM0MjUuNTI0LC04MC4wODQzIDQzMi4zNzQsLTg0LjE2MDcgNDM4LjY5MywtODggNDQ5LjEzNCwtOTQuMzQzNyA0NjAuMjI1LC0xMDEuMjA1IDQ3MC44NTIsLTEwNy44NDEiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDY5LjMxMSwtMTExLjAwNiA0NzkuNjQ1LC0xMTMuMzQ1IDQ3My4wMjYsLTEwNS4wNzIgNDY5LjMxMSwtMTExLjAwNiIvPgo8L2c+CjwhLS0gaW5kZXguanMgLS0+CjxnIGlkPSJub2RlMTQiIGNsYXNzPSJub2RlIj48dGl0bGU+aW5kZXguanM8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJ3aGl0ZSIgcG9pbnRzPSI1NTUuNzU1LC0xMDYgNDk1Ljg3MiwtMTA2IDQ5NS44NzIsLTcwIDU1NS43NTUsLTcwIDU1NS43NTUsLTEwNiIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1MjUuODE0IiB5PSItODMuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5pbmRleC5qczwvdGV4dD4KPC9nPgo8IS0tIHRlc3RzLmpzIC0tPgo8ZyBpZD0ibm9kZTE1IiBjbGFzcz0ibm9kZSI+PHRpdGxlPnRlc3RzLmpzPC90aXRsZT4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0id2hpdGUiIHBvaW50cz0iNTUyLjgxNCwtNTIgNDk4LjgxNCwtNTIgNDk4LjgxNCwtMTYgNTUyLjgxNCwtMTYgNTUyLjgxNCwtNTIiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTI1LjgxNCIgeT0iLTI5LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+dGVzdHMuanM8L3RleHQ+CjwvZz4KPC9nPgo8L3N2Zz4K" alt="Verzeichnisstruktur" /><figcaption>Verzeichnisstruktur</figcaption>
  </figure>
  </section>
  <section id="services" class="level3">
  <h3><span class="header-section-number">3.2.1</span> Services</h3>
  <p>Die Anwendung wurde in verschiedene <em>Services</em> aufgeteilt, welche möglichst isoliert von einander funktionsfähig sein sollen. Deren Code ist in einzelnen Verzeichnissen in <code>server/services/</code> zu finden.</p>
  <p>Diese Aufteilung soll es ermöglichen, einzelne Teile der Applikation einfacher überblicken und getrennt voneinander entwickeln zu können. Idealerweise sind Services so modular aufgebaut, dass sie in zukünftigen Projekten wiederverwendet werden können.</p>
  <p>Wie in der <a href="#fig:code-structure">Verzeichnisstruktur</a> zu sehen ist, sind Kern-Bestandteile eines Services:</p>
  <ul>
  <li>der Einstiegspunkt (<code>index.js</code>), welcher die Schnittstellen des Services exportiert,</li>
  <li>das Daten-Modell (<code>model.js</code> über welches Abfragen und Änderungen an der Datenbank ausgeführt werden,</li>
  <li>Tests (<code>tests.js</code>), welche beschreiben, was der Service behandelt und sicherstellen, dass keine Regressionen auftreten.</li>
  </ul>
  </section>
  <section id="alternativen" class="level3">
  <h3><span class="header-section-number">3.2.2</span> Alternativen</h3>
  <p>Eine alternative Strukturierung ist das Gruppieren nach Typen, d.h. in Verzeichnisse wie <code>models</code>, <code>controllers</code> und <code>specs</code> (Tests). Dies ist beispielsweise bei Anwendungen basierend auf <em>Ruby on Rails</em> <span class="citation" data-cites="rails">[12]</span> typisch. Da dies auf den Code aber nur minimale Auswirkungen hat, ist es letztendlich Geschmacks-Sache. Wir entschieden uns für die oben beschriebe Aufteilung, da diese die inhaltliche Aufteilung in den Vordergrund stellt, nicht die strukturelle.</p>
  </section>
  </section>
  <section id="benutzer-authentifizierung" class="level2">
  <h2><span class="header-section-number">3.3</span> Benutzer-Authentifizierung</h2>
  <p>Schon im Planungsstadium des Projekts war vorgesehen, dass es eine Benutzer-Authentifizierung geben muss, da nur registrierte Benutzer die Möglichkeit haben sollen abzustimmen.</p>
  <p>Dafür ist der <em>Auth</em> Service zuständig, der im wesentlichen die folgenden Module umfasst:</p>
  <ul>
  <li><em>Register.</em> Die Registrierung der Benutzer unter Angabe der E-Mail Adresse, des Passworts und des Benutzernamen. Die Validierung der Eingabe und bei Erfolg das Speichern der Daten in der Datenbank, wobei das Passwort verschlüsselt hinterlegt wird. Anschließend das versenden einer E-Mail mit einem Verifizierungs-Link, der den Benutzer verifiziert und die Registrierung abschließt.</li>
  <li><em>Login.</em> Das Anmelden mit dem der E-Mail Adresse. Wobei der Benutzer bei erfolgreicher Anmeldung einen Session Token bekommt.</li>
  <li><em>Verify.</em> Die Session-Verwaltung, die sicherstellt, dass der Benutzer einen validen Session-Token bekommt, vorausgesetzt der Benutzer ist verifiziert.</li>
  </ul>
  <section id="fig:auth-workflow">
  <figure>
  <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuMzguMCAoMjAxNDA0MTMuMjA0MSkKIC0tPgo8IS0tIFRpdGxlOiBBdXRob3JpemF0aW9uIFdvcmtmbG93IFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSI2MTZwdCIgaGVpZ2h0PSIzMTRwdCIKIHZpZXdCb3g9IjAuMDAgMC4wMCA2MTYuMDkgMzE0LjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDMxMCkiPgo8dGl0bGU+QXV0aG9yaXphdGlvbiBXb3JrZmxvdzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IndoaXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iLTQsNCAtNCwtMzEwIDYxMi4wOTMsLTMxMCA2MTIuMDkzLDQgLTQsNCIvPgo8IS0tIFJlZ2lzdHJhdGlvbiBGb3JtIC0tPgo8ZyBpZD0ibm9kZTEiIGNsYXNzPSJub2RlIj48dGl0bGU+UmVnaXN0cmF0aW9uIEZvcm08L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEzMS42OTUsLTI1MiAxMy4xNDkxLC0yNTIgMTMuMTQ5MSwtMjE2IDEzMS42OTUsLTIxNiAxMzEuNjk1LC0yNTIiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzIuNDIxOSIgeT0iLTIyOS44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlJlZ2lzdHJhdGlvbiBGb3JtPC90ZXh0Pgo8L2c+CjwhLS0gQ2hlY2tpdCAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+PHRpdGxlPkNoZWNraXQ8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyODMuNTExIiB5PSItMjgzLjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+Q2hlY2tpdDwvdGV4dD4KPC9nPgo8IS0tIFJlZ2lzdHJhdGlvbiBGb3JtJiM0NTsmZ3Q7Q2hlY2tpdCAtLT4KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+PHRpdGxlPlJlZ2lzdHJhdGlvbiBGb3JtJiM0NTsmZ3Q7Q2hlY2tpdDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xMzEuNjY1LC0yNDkuMDQyQzE2Ny41MzgsLTI1OC4zMDcgMjEyLjUyNSwtMjY5LjkyNSAyNDMuOTk2LC0yNzguMDUzIi8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI0My4xNTMsLTI4MS40NSAyNTMuNzExLC0yODAuNTYyIDI0NC45MDQsLTI3NC42NzIgMjQzLjE1MywtMjgxLjQ1Ii8+CjwvZz4KPCEtLSBDbGljayBWZXJpZmljYXRpb24gTGluayAtLT4KPGcgaWQ9Im5vZGU2IiBjbGFzcz0ibm9kZSI+PHRpdGxlPkNsaWNrIFZlcmlmaWNhdGlvbiBMaW5rPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNDQuNzY2LC0xNDQgMC4wNzgwNDA4LC0xNDQgMC4wNzgwNDA4LC0xMDggMTQ0Ljc2NiwtMTA4IDE0NC43NjYsLTE0NCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI3Mi40MjE5IiB5PSItMTIxLjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+Q2xpY2sgVmVyaWZpY2F0aW9uIExpbms8L3RleHQ+CjwvZz4KPCEtLSBSZWdpc3RyYXRpb24gRm9ybSYjNDU7Jmd0O0NsaWNrIFZlcmlmaWNhdGlvbiBMaW5rIC0tPgo8IS0tIENoZWNrIER1cGxpY2F0ZSBNYWlsJiM0NTtBZGRyZXNzIC0tPgo8ZyBpZD0ibm9kZTMiIGNsYXNzPSJub2RlIj48dGl0bGU+Q2hlY2sgRHVwbGljYXRlIE1haWwmIzQ1O0FkZHJlc3M8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyODMuNTExIiB5PSItMjI5LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+Q2hlY2sgRHVwbGljYXRlIE1haWwmIzQ1O0FkZHJlc3M8L3RleHQ+CjwvZz4KPCEtLSBDaGVja2l0JiM0NTsmZ3Q7Q2hlY2sgRHVwbGljYXRlIE1haWwmIzQ1O0FkZHJlc3MgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5DaGVja2l0JiM0NTsmZ3Q7Q2hlY2sgRHVwbGljYXRlIE1haWwmIzQ1O0FkZHJlc3M8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMjgzLjUxMSwtMjY5Ljc5QzI4My41MTEsLTI2Ny4zMDggMjgzLjUxMSwtMjY0LjgyNiAyODMuNTExLC0yNjIuMzQ0Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI4Ny4wMTEsLTI2Mi4xNDEgMjgzLjUxMSwtMjUyLjE0MSAyODAuMDExLC0yNjIuMTQxIDI4Ny4wMTEsLTI2Mi4xNDEiLz4KPC9nPgo8IS0tIENyZWF0ZSBOZXcgVXNlciBSZWNvcmQgLS0+CjxnIGlkPSJub2RlNCIgY2xhc3M9Im5vZGUiPjx0aXRsZT5DcmVhdGUgTmV3IFVzZXIgUmVjb3JkPC90aXRsZT4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTE1LjEzNiIgeT0iLTIwMi44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPkNyZWF0ZSBOZXcgVXNlciBSZWNvcmQ8L3RleHQ+CjwvZz4KPCEtLSBDaGVjayBEdXBsaWNhdGUgTWFpbCYjNDU7QWRkcmVzcyYjNDU7Jmd0O0NyZWF0ZSBOZXcgVXNlciBSZWNvcmQgLS0+CjxnIGlkPSJlZGdlMyIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5DaGVjayBEdXBsaWNhdGUgTWFpbCYjNDU7QWRkcmVzcyYjNDU7Jmd0O0NyZWF0ZSBOZXcgVXNlciBSZWNvcmQ8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMzc4LjkwMiwtMjIyLjkwMUMzOTQuNzMyLC0yMjEuMDQgNDExLjA5NywtMjE5LjExNiA0MjYuNzQsLTIxNy4yNzYiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDI3LjM4LC0yMjAuNzI1IDQzNi45MDMsLTIxNi4wODEgNDI2LjU2MywtMjEzLjc3MyA0MjcuMzgsLTIyMC43MjUiLz4KPC9nPgo8IS0tIFNlbmQgVmVyaWZpY2F0aW9uIE1haWwgLS0+CjxnIGlkPSJub2RlNSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5TZW5kIFZlcmlmaWNhdGlvbiBNYWlsPC90aXRsZT4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjgzLjUxMSIgeT0iLTE3NS44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlNlbmQgVmVyaWZpY2F0aW9uIE1haWw8L3RleHQ+CjwvZz4KPCEtLSBDcmVhdGUgTmV3IFVzZXIgUmVjb3JkJiM0NTsmZ3Q7U2VuZCBWZXJpZmljYXRpb24gTWFpbCAtLT4KPGcgaWQ9ImVkZ2U0IiBjbGFzcz0iZWRnZSI+PHRpdGxlPkNyZWF0ZSBOZXcgVXNlciBSZWNvcmQmIzQ1OyZndDtTZW5kIFZlcmlmaWNhdGlvbiBNYWlsPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTQzNi44MiwtMTk3LjkwOUM0MTMuNjYyLC0xOTUuMTg2IDM4OC4yMTcsLTE5Mi4xOTQgMzY0Ljg2OCwtMTg5LjQ0OSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIzNjQuOTk0LC0xODUuOTM5IDM1NC42NTQsLTE4OC4yNDggMzY0LjE3NywtMTkyLjg5MiAzNjQuOTk0LC0xODUuOTM5Ii8+CjwvZz4KPCEtLSBVcGRhdGUgVXNlciBSZWNvcmQgLS0+CjxnIGlkPSJub2RlNyIgY2xhc3M9Im5vZGUiPjx0aXRsZT5VcGRhdGUgVXNlciBSZWNvcmQ8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyODMuNTExIiB5PSItMTIxLjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VXBkYXRlIFVzZXIgUmVjb3JkPC90ZXh0Pgo8L2c+CjwhLS0gQ2xpY2sgVmVyaWZpY2F0aW9uIExpbmsmIzQ1OyZndDtVcGRhdGUgVXNlciBSZWNvcmQgLS0+CjxnIGlkPSJlZGdlNSIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5DbGljayBWZXJpZmljYXRpb24gTGluayYjNDU7Jmd0O1VwZGF0ZSBVc2VyIFJlY29yZDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xNDQuNzk0LC0xMjZDMTY1LjEzNiwtMTI2IDE4Ny4zNDgsLTEyNiAyMDcuODc5LC0xMjYiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjA4LjEyNCwtMTI5LjUgMjE4LjEyNCwtMTI2IDIwOC4xMjQsLTEyMi41IDIwOC4xMjQsLTEyOS41Ii8+CjwvZz4KPCEtLSBMb2dpbiBGb3JtIC0tPgo8ZyBpZD0ibm9kZTgiIGNsYXNzPSJub2RlIj48dGl0bGU+TG9naW4gRm9ybTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTE0LjIwMiwtOTAgMzAuNjQyMSwtOTAgMzAuNjQyMSwtNTQgMTE0LjIwMiwtNTQgMTE0LjIwMiwtOTAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzIuNDIxOSIgeT0iLTY3LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+TG9naW4gRm9ybTwvdGV4dD4KPC9nPgo8IS0tIENsaWNrIFZlcmlmaWNhdGlvbiBMaW5rJiM0NTsmZ3Q7TG9naW4gRm9ybSAtLT4KPCEtLSBDaGVjayBFeGlzdGVuY2Ugb2YgTWFpbCYjNDU7QWRkcmVzcyAtLT4KPGcgaWQ9Im5vZGU5IiBjbGFzcz0ibm9kZSI+PHRpdGxlPkNoZWNrIEV4aXN0ZW5jZSBvZiBNYWlsJiM0NTtBZGRyZXNzPC90aXRsZT4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjgzLjUxMSIgeT0iLTY3LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+Q2hlY2sgRXhpc3RlbmNlIG9mIE1haWwmIzQ1O0FkZHJlc3M8L3RleHQ+CjwvZz4KPCEtLSBMb2dpbiBGb3JtJiM0NTsmZ3Q7Q2hlY2sgRXhpc3RlbmNlIG9mIE1haWwmIzQ1O0FkZHJlc3MgLS0+CjxnIGlkPSJlZGdlNiIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5Mb2dpbiBGb3JtJiM0NTsmZ3Q7Q2hlY2sgRXhpc3RlbmNlIG9mIE1haWwmIzQ1O0FkZHJlc3M8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTE0LjIzMywtNzJDMTMwLjYwMSwtNzIgMTUwLjM0MSwtNzIgMTcwLjQ1MywtNzIiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTcwLjY2NCwtNzUuNTAwMSAxODAuNjY0LC03MiAxNzAuNjY0LC02OC41MDAxIDE3MC42NjQsLTc1LjUwMDEiLz4KPC9nPgo8IS0tIENoZWNrIGZvciBNYXRjaGluZyBQYXNzd29yZCAtLT4KPGcgaWQ9Im5vZGUxMCIgY2xhc3M9Im5vZGUiPjx0aXRsZT5DaGVjayBmb3IgTWF0Y2hpbmcgUGFzc3dvcmQ8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1MTUuMTM2IiB5PSItNDAuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5DaGVjayBmb3IgTWF0Y2hpbmcgUGFzc3dvcmQ8L3RleHQ+CjwvZz4KPCEtLSBDaGVjayBFeGlzdGVuY2Ugb2YgTWFpbCYjNDU7QWRkcmVzcyYjNDU7Jmd0O0NoZWNrIGZvciBNYXRjaGluZyBQYXNzd29yZCAtLT4KPGcgaWQ9ImVkZ2U3IiBjbGFzcz0iZWRnZSI+PHRpdGxlPkNoZWNrIEV4aXN0ZW5jZSBvZiBNYWlsJiM0NTtBZGRyZXNzJiM0NTsmZ3Q7Q2hlY2sgZm9yIE1hdGNoaW5nIFBhc3N3b3JkPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTM4Ni4yMzEsLTYwLjAzOTVDMzk0Ljc2NywtNTkuMDM1OCA0MDMuNDAxLC01OC4wMjA2IDQxMS45NCwtNTcuMDE2NSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0MTIuMzg3LC02MC40ODgxIDQyMS45MSwtNTUuODQ0MiA0MTEuNTcsLTUzLjUzNiA0MTIuMzg3LC02MC40ODgxIi8+CjwvZz4KPCEtLSBSZXR1cm4gQXV0aG9yaXphdGlvbiBUb2tlbiAtLT4KPGcgaWQ9Im5vZGUxMSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5SZXR1cm4gQXV0aG9yaXphdGlvbiBUb2tlbjwvdGl0bGU+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI4My41MTEiIHk9Ii0xMy44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlJldHVybiBBdXRob3JpemF0aW9uIFRva2VuPC90ZXh0Pgo8L2c+CjwhLS0gQ2hlY2sgZm9yIE1hdGNoaW5nIFBhc3N3b3JkJiM0NTsmZ3Q7UmV0dXJuIEF1dGhvcml6YXRpb24gVG9rZW4gLS0+CjxnIGlkPSJlZGdlOCIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5DaGVjayBmb3IgTWF0Y2hpbmcgUGFzc3dvcmQmIzQ1OyZndDtSZXR1cm4gQXV0aG9yaXphdGlvbiBUb2tlbjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik00MjIuMTU5LC0zNC4xODVDNDA4LjIyLC0zMi41NDYgMzkzLjgxMywtMzAuODUyIDM3OS44MDUsLTI5LjIwNSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIzODAuMDI5LC0yNS43MDczIDM2OS42ODksLTI4LjAxNTQgMzc5LjIxMSwtMzIuNjU5NCAzODAuMDI5LC0yNS43MDczIi8+CjwvZz4KPC9nPgo8L3N2Zz4K" alt="Authorisierungs-Ablauf" /><figcaption>Authorisierungs-Ablauf</figcaption>
  </figure>
  </section>
  <p>Nachfolgend ein detaillierter Einblick in die einzelnen Module.</p>
  <section id="registrierung" class="level3">
  <h3><span class="header-section-number">3.3.1</span> Registrierung</h3>
  <p>Die Registrierung läuft folgendermaßen ab.</p>
  <p>Der Benutzer gibt seine Daten ein (Name, E-Mail, Password) und gibt beim Absenden diese als POST Request an den Server. Die Daten werden aus dem Request extrahiert, normalisiert und validiert.</p>
  <p>Für die Validierung wurde die Library <em>CheckIt</em> <span class="citation" data-cites="checkit">[31]</span> verwendet. Wir entschieden uns für <em>CheckIt</em>, da es vom selben Autor wie <em>bookshelf</em> und <em>knex</em> ist (Tim Griesser) und daher gut mit diesen zusammen arbeitet. Alternativen sind <a href="https://www.npmjs.com/package/joi"><em>Joi</em></a> oder <a href="https://github.com/mafintosh/is-my-json-valid"><em>is-my-json-valid</em></a>.</p>
  <p><em>CheckIt</em> ermöglicht es, Javascript Objekte zu validieren, indem für die Daten bestimmte Formate und Anforderungen definiert werden. Diese sind z.B. bei uns, dass das Feld E-Mail auch das Format einer E-Mail Adresse hat, das Passwort aus mindestens 6 Zeichen besteht und kein Felder leer sein darf. Damit stellen wir sicher, dass keine Spam-Anmeldungen möglich sind.</p>
  <p>Wenn die vorliegenden Daten den geforderten Standards entsprechen, wird überprüft, ob die Daten nicht bereits existieren. Sollte das nicht der Fall sein, wird das Passwort an einen Helper<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a> übergeben, der mittels <em>bcrypt</em> <span class="citation" data-cites="bcrypt">[32]</span>, einen Salt generiert und aus diesem und dem Passwort einen Hash-Wert ermittelt<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>. Zusätzlich wird ein Token für die Verifizierung erzeugt. Der generierte Hash, sowie der Token werden dann zusammen mit den eingegebenen Daten in der Datenbank hinterlegt und anschließend eine E-Mail mit einem Verifizierungs-Link versandt, welcher den Verifizierungs-Token in URL-geeigneter Form enthält.</p>
  <p>Sobald dieser Link aufgerufen wird, wird der mit dem Token verbundene Account als <q>verifiziert</q> markiert. Die Registrierung ist damit abgeschlossen.</p>
  </section>
  <section id="login" class="level3">
  <h3><span class="header-section-number">3.3.2</span> Login</h3>
  <p>Ursprünglich wollten wir die Open Source Library <em>Passport</em> <span class="citation" data-cites="passport">[34]</span> für die Anmeldung verwenden, doch im Laufe des Projekts haben wir festgestellt, dass dies kaum Vorteile bringt, da wir den größten Teil der Funktionalitäten trotzdem selber schreiben mussten. So stellte <em>Passport</em> beispielsweise nur Cookies für Sessions zur Verfügung, sodass wir die Generierung von Session-Tokens selbst schreiben mussten. Selbst für die Überprüfung der Login Daten haben wir festgestellt, dass die Benutzung von <em>Passport</em> keine wesentlichen Vorteile gegenüber einer selbst geschriebenen Lösung bietet und haben deshalb beschlossen, auf die zusätzliche Abhängigkeit zu verzichten, die Library nicht zu verwenden und stattdessen eine eigene Lösung zu schreiben. Wäre ein Anmeldung über Soziale Dienste wie <em>Facebook</em> oder <em>Twitter</em> vorgesehen, würde sich eine erneute Betrachtung, der Library unter Umständen lohnen, da <em>Passport</em> dazu eine Schnittstelle bereitstellt. Doch da dies nicht als Feature vorgesehen war, hatte das keinen Einfluss auf unsere Entscheidung.</p>
  <p>Die Anmeldung wurde von uns auf folgende Art gelöst.</p>
  <p>Der Benutzer gibt seine Anmeldedaten (E-Mail und Passwort) ein und gibt beim Absenden den POST Request an den Server. Die versendeten Daten werden aus dem Request extrahiert. Mit den extrahierten Daten wird zuerst überprüft, ob es in der Datenbank einen Benutzer mit der angegebenen E-Mail gibt und ob dieser Benutzer verifiziert ist. Sollte dies der Fall sein wird ein <em>User</em>-Objekt erstellt, welches die Informationen über den Benutzer aus der Datenbank enthält.</p>
  <p>Ein Helper<a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a> überprüft, dann ob das vom Benutzer eingegebene Passwort mit dem hinterlegten Passwort übereinstimmt. Da das in der Datenbank gespeicherte Passwort gehasht vorliegt, benutzen wir die compare Methode von bcrypt, die uns erlaubt das eingegebene Passwort mit dem gehashten Passwort abzugleichen. Stimmen diese überein wird ein Session-Token generiert und zurückgegeben. Damit ist der Anmeldeprozess abgeschlossen.</p>
  </section>
  <section id="verifizierung" class="level3">
  <h3><span class="header-section-number">3.3.3</span> Verifizierung</h3>
  <p>Die Verifizierung wurde bereits bei der Planung vorgesehen, da wir sicherstellen wollten, dass die bei der Registrierung eingegebenen E-Mail-Adressen auch wirklich existieren und der Benutzer dies durch das Klicken auf einen Verifizierungs-Link bestätigt. Wir sahen diese Funktionalität deshalb als wichtig an, da wir die Erstellung von Spam-Accounts einschränken wollten.</p>
  <p>Die Verifizierung läuft wie folgt ab.</p>
  <p>Wie bereits vorher erläutert, wurde beim Registrieren ein Verifizierungs-Token erstellt und in der Datenbank abgelegt. Dieser Token wird dann mithilfe der Library <em>jsonwebtoken</em> <span class="citation" data-cites="jsonwebtoken">[35]</span> in einen sogenannten JSON-Web-Token (JWT) konvertiert (eine serialisierte und kryptographisch signierte From eines JSON-Objektes), welcher den zuvor generierten Verifizierungs-Token und die ID des Benutzers enthält. Der JWT wird dann an die vom Benutzer eingegebene E-Mail in Form eines Verifizierungs-Links gesendet.</p>
  <p>Zum Versenden der E-Mail haben wir die <em>Nodemailer</em>-Library <span class="citation" data-cites="nodemailer">[36]</span> benutzt, weil diese sehr leicht zu implementieren war und viele Funktionalitäten bot (um beispielsweise mit externen Mailling-Anbietern wie <a href="https://sendgrid.com/"><em>Sendgrid</em></a> zu kommunizieren, welche neben SMTP auch weitere Funktionen über eine REST-API bieten).</p>
  <p>Beim Aufruf des Verifizierungs-Links dekodieren wir zuerst den JWT, extrahieren daraus die Benutzer ID und den Verifizierungs-Token und überprüfen, ob die Daten in valider Form vorliegen. Dann überprüfen wir, ob der Benutzer bereits verifiziert ist und ob der extrahierte Token mit dem Token in der Datenbank übereinstimmen. Falls der Benutzer nicht bereits verifiziert und der Token korrekt ist, wird der Benutzer verifiziert und die Verifizierung ist abgeschlossen.</p>
  </section>
  </section>
  <section id="datenabfrage-endpunkte-für-serien-und-episoden" class="level2">
  <h2><span class="header-section-number">3.4</span> Datenabfrage: Endpunkte für Serien und Episoden</h2>
  <p>Einer der ersten Schritte im Projekt-Verlauf war das Implementieren der der JSON-Endpunkte zur Abfrage von Serien und Episoden. Es soll für beide Entitäten eine Liste mit Einträgen sowie einzelne Einträge abgefragt werden können.</p>
  <p>Dazu wurden zunächst die zwei <em>Services</em> <q>shows</q> und <q>episodes</q> erstellt. Wie <a href="#sec:struktur">oben</a> beschrieben, sind dies Verzeichnisse, welche möglichst isolierten Code für einen Bereich der Anwendung beinhalten. Für beide <em>Services</em> wurde eine <code>model.js</code> erstellt, welche Informationen zur Datenbank-Repräsentation der Daten beschreibt, sowie eine <code>index.js</code>, welche die möglichen HTTP-Anfragen beschreibt und einen <em>express Router</em> exportiert.</p>
  <p>Der initiale Inhalt einer solchen <code>index.js</code> sieht so aus:</p>
  <div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> express = <span class="fu">require</span>(<span class="st">'express'</span>);
  <span class="kw">var</span> app = <span class="ot">express</span>.<span class="fu">Router</span>();
  <span class="ot">module</span>.<span class="fu">exports</span> = app;</code></pre></div>
  <section id="abfragen-vieler-einträge" class="level3">
  <h3><span class="header-section-number">3.4.1</span> Abfragen vieler Einträge</h3>
  <p>Unter dem relativen Pfad <code>/</code> soll eine Liste von Einträgen abgefragt werden können. Eine triviale Variante eines solchen Endpunkts könnte wie folgt geschrieben werden (anschließend an den oben gezeigten Code der <code>index.js</code>):</p>
  <div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> Show = <span class="fu">require</span>(<span class="st">'./model.js'</span>);
  
  <span class="ot">app</span>.<span class="fu">get</span>(<span class="st">'/'</span>, <span class="kw">function</span> (request, response) {
    <span class="ot">Show</span>.<span class="fu">query</span>()
    .<span class="fu">then</span>(<span class="kw">function</span> (shows) {
      <span class="ot">response</span>.<span class="fu">send</span>(shows);
    })
    .<span class="fu">catch</span>(<span class="kw">function</span> (error) {
      <span class="ot">response</span>.<span class="fu">status</span>(<span class="dv">500</span>).<span class="fu">send</span>({<span class="dt">error</span>: error});
    });
  });</code></pre></div>
  </section>
  <section id="sec:wrap-route" class="level3">
  <h3><span class="header-section-number">3.4.2</span> Fehlerfälle abstrakt behandeln</h3>
  <p>Im vorigen Code-Beispiel wird ein möglicher Fehlerfall bei der Abfrage von Serien dadurch behandelt, dass eine Antwort mit HTTP-Status <code>500</code> und der JSON-Darstellung des erhaltenen Fehlers gesendet wird. Dieser Fall ist sehr allgemein, muss aber standardmäßig in jedem Endpunkt behandelt werden.</p>
  <p>Um doppelten Code zu vermeiden, wurde die Funktion <code>wrapRoute</code> geschrieben (vgl. <code>server/helpers/wrap_route.js</code>). Diese wird statt einem direkten Callback beim Erstellen des Endpunkts verwendet und erwartet als einzigen Parameter eine Funktion, die ein Promise zurückgibt. Je nach Wert des aufgelösten Promises wird die entsprechende Antwort zurückgesendet.</p>
  <p>Der benötigte Code für den trivialen Endpunkt von oben reduziert sich damit drastisch:</p>
  <div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> wrapRoute = <span class="fu">require</span>(<span class="st">'../../helpers/wrap_route'</span>);
  <span class="kw">var</span> Show = <span class="fu">require</span>(<span class="st">'./model.js'</span>);
  
  <span class="ot">app</span>.<span class="fu">get</span>(<span class="st">'/'</span>, <span class="fu">wrapRoute</span>(<span class="kw">function</span> (request) {
    <span class="kw">return</span> <span class="ot">Show</span>.<span class="fu">query</span>();
  }));</code></pre></div>
  </section>
  <section id="sec:http-errors" class="level3">
  <h3><span class="header-section-number">3.4.3</span> HTTP-Antworten bei Fehlerfällen</h3>
  <p>Es sollte nicht auf jeden Fehler mit HTTP-Status <code>500</code> geantwortet werden, da dieser für <q>Internal Server Error</q> steht und daher für Fehler steht, deren Ursache nicht genauer durch einen HTTP-Status repräsentiert werden kann. Häufige Fehlerfälle, die zusätzlich beachtet werden sollen, und ihre korrekten Status-Codes, sind <span class="citation" data-cites="vinay2013pragmatic fielding2000rest">[1; 37]</span>:</p>
  <ul>
  <li><code>401</code>: Keine Zugriffsberechtigung.</li>
  <li><code>404</code>: Angefragte Ressource konnte nicht gefunden werden.</li>
  <li><code>409</code>: Daten-Konflikt (beim Erstellen eines neuen Eintrags).</li>
  <li><code>422</code>: Daten konnten nicht verarbeitet werden (z.B. weil eine Validierung gescheitert ist).</li>
  </ul>
  </section>
  <section id="filterung-und-sortierung" class="level3">
  <h3><span class="header-section-number">3.4.4</span> Filterung und Sortierung</h3>
  <p>Standardmäßig werden alle Einträge ausgegeben (später wird die Anzahl limitiert und Seiten-weises Abfragen eingeführt). Diese Liste kann je nach Entität mit bestimmten Filtern versehen werden, welche als Teil der URL in Form von Query-Parametern übertragen werden.</p>
  <p>Für Serien ist beispielsweise die Abfrage <code>/?show_ids=4,8,15,16,23,42</code> möglich, wodurch nur Einträge zurückgegeben werden, deren ID angegeben wurde. Da das Auslesen von Query-Paramtern und Ergänzen der Datenbank-Abfrage um die korrekten Bedingungen für viele Entitäten sehr ähnlich ist, wurden in <code>server/helpers/query_params.js</code> einige Hilfsmethoden dazu geschrieben.</p>
  </section>
  <section id="abfragen-eines-einzelnen-eintrags" class="level3">
  <h3><span class="header-section-number">3.4.5</span> Abfragen eines einzelnen Eintrags</h3>
  <p>Ähnlich wie die Abfrage nach einer Liste von Einträgen mit bestimmten IDs gestaltet sich auch die Abfrage eines einzelnen Eintrags. Jeder Eintrag ist unter der URL <code>/:id</code> verfügbar (wobei <code>:id</code> durch die ID des Eintrags ersetzt wird).</p>
  <p>Zusätzlich zu den Feldern des Eintrags ist es bei bestimmten Entitäten auch möglich, verwandte Daten anderer Entitäten mit abzufragen, um z.B. eine Serie und die Liste der IDs aller dazugehöriger Episoden abzufragen. Diese Daten werden als Teil eines speziellen <code>link</code>-Attributs in der JSON-Antwort übertragen (vgl. <span class="citation" data-cites="jsonapi">Referenz 38</span>).</p>
  </section>
  <section id="zukünftige-episoden-als-kalender-feed" class="level3">
  <h3><span class="header-section-number">3.4.6</span> Zukünftige Episoden als Kalender-Feed</h3>
  <p>Bisher liefert die Applikation auf jede Anfrage JSON-Daten zurück. Dies ist praktisch, wenn die Daten von einer Anwendung gelesen werden, die an EpisodeFever angepasst wurde (z.B. ein HTML5-basiertes Frontend für EpisodeFever). Auf Grund der <a href="#sec:import-times">beim Import ermittelten</a> genauen Zeit-Informationen ist aber gerade bei den Episoden-Daten auch noch ein anderes Format sinnvoll: Kalender-Feeds (<em>ics</em>- bzw. <em>iCal</em>-Format).</p>
  <p>Ein Benutzer kann einen solchen Feed in sein Kalender-Programm (z.B. <em>Google Calendar</em> oder <em>Kalender</em> von OS X) und erhält so die Termine zukünftiger Episoden der von ihm betrachteten Serien.</p>
  <p>Das <em>ics</em>-Format ist ein Text-Format, welches <em>Events</em> (Termine) in Zeilenblöcken anhand von bestimmten Attributen beschreibt. Da es ein sehr verbreitetes Format ist (<strong>s. Standard</strong>), gibt es eine Reihe von Libraries, welche dieses aus JSON-Daten erzeugen können. Eine, welche sehr umfangreich ist, aktiv entwickelt wird und außerdem explizit Unterstützung für Zeitzonen bieten, ist <em>cozy-ical</em> <span class="citation" data-cites="cozyical">[39]</span>.</p>
  </section>
  </section>
  <section id="sec:tests-rest" class="level2">
  <h2><span class="header-section-number">3.5</span> Testen von REST-Anfragen</h2>
  <p>Um sicherzustellen, dass die für einen Service vorgesehenen Funktionen korrekt implemtiert wurden und um zu vermeiden, dass in Zukunft Änderungen gemacht werden, welche die erwarteten Funktionsweisen brechen, werden zu jedem Service automatisierte Tests geschrieben. Dazu werden die <a href="#sec:tests-tech">oben beschriebenen</a> Module <em>mocha</em>, <em>chai</em> und <em>supertest</em> verwendet.</p>
  <p>Durch <em>supertest</em> ist es möglich, einen auf <em>Express.js</em> basierten Server in einem Test-Kontext zu starten, ohne ihn auf einem bestimmten Port zu starten. An diesen Server werden dann Anfragen gestellt, und die Antworten auf erwartet Werte und Strukturen überprüft. Ein einfacher Test sieht so aus:</p>
  <div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> request = <span class="fu">require</span>(<span class="st">'supertest'</span>);
  <span class="kw">var</span> app = <span class="fu">require</span>(<span class="st">'express'</span>)();
  <span class="ot">app</span>.<span class="fu">use</span>(<span class="st">'/'</span>, <span class="fu">require</span>(<span class="st">'./index'</span>));
  
  <span class="co">// `describe` beginnt Test-Suite</span>
  <span class="fu">describe</span>(<span class="st">&quot;API index&quot;</span>, <span class="kw">function</span> () {
    <span class="kw">var</span> agent = <span class="ot">request</span>.<span class="fu">agent</span>(app);
  
    <span class="co">// `it` beschreibt einen konkreten Test-Fall</span>
    <span class="fu">it</span>(<span class="st">&quot;returns a JSON response&quot;</span>, <span class="kw">function</span> () {
      <span class="kw">return</span> <span class="ot">agent</span>.<span class="fu">get</span>(<span class="st">'/'</span>)
      .<span class="fu">expect</span>(<span class="dv">200</span>) <span class="co">// Test auf HTTP-Status (Supertest)</span>
      .<span class="fu">set</span>(<span class="st">'Accept'</span>, <span class="st">'application/json'</span>)
      .<span class="fu">expect</span>(<span class="st">'Content-Type'</span>, <span class="ot">/json/</span>)
      .<span class="fu">exec</span>() <span class="co">// Konvertiere Anfrage-Objekt zu Promise</span>
      .<span class="fu">then</span>(<span class="kw">function</span> (response) {
        <span class="co">// Teste Antwort auf korrekt Struktur</span>
        <span class="fu">expect</span>(<span class="ot">response</span>.<span class="fu">body</span>).<span class="ot">to</span>.<span class="ot">be</span>.<span class="fu">an</span>(<span class="st">'object'</span>);
      });
    });
  });</code></pre></div>
  <section id="test-daten" class="level3">
  <h3><span class="header-section-number">3.5.1</span> Test-Daten</h3>
  <p>Eine Herausforderung beim Schreiben von Tests ist es, dynamisch Test-Daten in die Datenbank einfügen zu können. Um beispielsweise testen zu können, ob ein Entpunkt die Liste aller Episoden ausgibt, welche nach einem bestimmten Datum ausgestrahlt werden, müssen zunächst Episoden-Daten mit verschiedenen Ausstrahlungsdaten eingefügt werden.</p>
  <p>Um dies zu vereinfachen, wurde jedem <em>bookshelf</em>-Model eine statische <code>fake</code>-Methode hinzugefügt. Diese generiert standardmäßig einen Datensatz mit zufällen Daten (mit Hilfe von <em>faker.js</em> <span class="citation" data-cites="fakerjs">[40]</span>), es können jedoch einzelne Felder beliebig überschrieben werden.</p>
  <p>Da <code>fake()</code> ein Promise mit dem zu speichernden Datensatz zurückliefert, kann das Erstellen von Test-Daten direkt innerhalb eines Tests ausgeführt werden. Sollen die Daten in allen Tests einer Test-Suite verliegen, können sie auch in einem <code>before</code>-Block eingefügt werden (auf der selben Ebene wie die mit <code>it</code> registrierten konkreten Tests). In solchen <code>before</code>-Blöcken werden zu Beginn einer Tests-Suite oft auch die schon in der Datenbank vorhandenen Einträge gelöscht, um konsistent testen zu können.</p>
  <p>Im folgenden Beispiel wird eine Serie eingefügt und anschließend ein Test für <code>/shows</code> ausgeführt:</p>
  <div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> request = <span class="fu">require</span>(<span class="st">'supertest'</span>);
  <span class="kw">var</span> Show = <span class="fu">require</span>(<span class="st">'./model'</span>);
  <span class="kw">var</span> app = <span class="fu">require</span>(<span class="st">'express'</span>)();
  <span class="ot">app</span>.<span class="fu">use</span>(<span class="st">'/'</span>, <span class="fu">require</span>(<span class="st">'./index'</span>));
  <span class="kw">var</span> F = <span class="fu">require</span>(<span class="st">'../../helpers/faking_helpers'</span>);
  
  <span class="fu">describe</span>(<span class="st">&quot;Shows API&quot;</span>, <span class="kw">function</span> () {
    <span class="kw">var</span> agent = <span class="ot">request</span>.<span class="fu">agent</span>(app);
  
    <span class="fu">before</span>(<span class="kw">function</span> () {
      <span class="kw">return</span> <span class="ot">F</span>.<span class="fu">dropAllTheData</span>()
      .<span class="fu">then</span>(<span class="kw">function</span> () {
        <span class="kw">return</span> <span class="ot">Show</span>.<span class="fu">fake</span>();
      })
    });
  
    <span class="fu">it</span>(<span class="st">&quot;returns a list of shows&quot;</span>, <span class="kw">function</span> () {
      <span class="kw">return</span> <span class="ot">agent</span>.<span class="fu">get</span>(<span class="st">'/'</span>)
      .<span class="fu">expect</span>(<span class="dv">200</span>)
      .<span class="fu">exec</span>()
      .<span class="fu">then</span>(<span class="kw">function</span> (res) {
        <span class="fu">expect</span>(<span class="ot">res</span>.<span class="fu">body</span>).<span class="ot">to</span>.<span class="ot">be</span>.<span class="fu">an</span>(<span class="st">'object'</span>);
        <span class="fu">expect</span>(<span class="ot">res</span>.<span class="ot">body</span>.<span class="fu">shows</span>).<span class="ot">to</span>.<span class="ot">be</span>.<span class="fu">an</span>(<span class="st">'array'</span>);
        <span class="fu">expect</span>(<span class="ot">res</span>.<span class="ot">body</span>.<span class="fu">shows</span>).<span class="ot">to</span>.<span class="ot">have</span>.<span class="fu">length</span>(<span class="dv">1</span>);
      });
    });
  });</code></pre></div>
  </section>
  </section>
  <section id="sec:import" class="level2">
  <h2><span class="header-section-number">3.6</span> Import von Daten</h2>
  <p>Informationen zu TV-Serien und deren Episoden sind von verschiedenen Diensten verfügbar. Ein wichtiger Teil des Episode-Fever-Projektes ist es, diese Informationen abzufragen und in der lokalen Datenbank so zu speichern, dass die restliche Anwendung effizient darauf zugreifen kann.</p>
  <p>Eine der bekanntesten Plattformen für diese Daten ist TheTVDB <span class="citation" data-cites="thetvdb">[41]</span>, auf welcher Freiwillige Metadaten, Beschreibungen und sogar Grafiken zu Serien in verschiedenen Sprachen eintragen können, welche dann unter einer freien Lizenz<a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a> zur Verfügung stehen.</p>
  <p>Außerdem bietet TheTVDB eine XML-API, mit der es möglich ist, nach Serien zu suchen und die gesamten Daten zu einer Serie (inkl. Daten zu Episoden) abzufragen.</p>
  <section id="sec:import-requests" class="level3">
  <h3><span class="header-section-number">3.6.1</span> XML-Daten abfragen und verarbeiten</h3>
  <p>Um mit der XML-API über HTTP zu kommunizieren, wurde <em>superagent</em> <span class="citation" data-cites="superagent">[29]</span> eingesetzt. Basierend auf den von Node mitgelieferten HTTP-Client-Funktionen<a href="#fn8" class="footnoteRef" id="fnref8"><sup>8</sup></a> bietet es eine übersichtliche Schnittstelle zum Erstellen von komplexen HTTP-Requests. Um den Umgang mit asynchronen Funktionen zu vereinfachen, wurde der Prototyp von <em>superagent</em> um die Methode <code>.exec()</code> erweitert, welche ein <em>Promise</em> zurückgibt (siehe <a href="#sec:technologien">verwendete Technologien</a>).</p>
  <p>Um das Arbeiten mit den API-Antworten im XML-Format zu vereinfachen, wurde das Modul <em>xml2js</em> <span class="citation" data-cites="xml2js">[43]</span> ausgewählt. Dieses basiert auf dem Streaming-Parser <em>sax-js</em> <span class="citation" data-cites="saxjs">[44]</span> und konvertiert XML-Strukturen in JavaScript-Objekte. Hierbei werden einige Optionen angeboten, welche das resultierende Objekt stark vereinfachen können, u.a. um Knoten mit nur einem Kind als direkten Datensatz (und nicht als Array) auszugeben. Da die APIs XML-Dokumente zurückgeben, welche sehr wenig Gebrauch von verschachtelten Knoten oder Attributen machen, kann <em>xml2js</em> Objekte mit flacher Struktur erzeugen, welche einfach zu verwenden sind.</p>
  <p>Die gesamte Konfiguration zur Abfrage und Verarbeitung der API-Anfragen kann in der Datei <code>import/apis/xml_api_helper.js</code> gefunden werden.</p>
  </section>
  <section id="verwenden-der-xml-api-von-thetvdb" class="level3">
  <h3><span class="header-section-number">3.6.2</span> Verwenden der XML-API von TheTVDB</h3>
  <p>Jede Anfrage zu der TheTVDB-API muss mit einem API-Key versehen werden (als Teil der URL). Ein solcher Schlüssel kann über <a href="http://thetvdb.com/?tab=apiregister">ein Formular</a> beantragt werden.</p>
  <p>Um die Daten einer TV-Serie auszulesen, muss zunächst die TVDB-eigene ID dieser Serie gefunden werden. Mit dieser kann dann die URL zu dem gesamten Datensatz der Serie generiert werden. Vergleiche hierzu die Abbildung zu <a href="#fig:requesting-show-data">API-Abfragen</a>.</p>
  <section id="fig:requesting-show-data">
  <figure>
  <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuMzguMCAoMjAxNDA0MTMuMjA0MSkKIC0tPgo8IS0tIFRpdGxlOiBUaGVUVkRCIEFQSSBSZXF1ZXN0IEN5Y2xlIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSI2NjZwdCIgaGVpZ2h0PSI2MzlwdCIKIHZpZXdCb3g9IjAuMDAgMC4wMCA2NjYuMDAgNjM5LjEwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDYzNS4xMDQpIj4KPHRpdGxlPlRoZVRWREIgQVBJIFJlcXVlc3QgQ3ljbGU8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJub25lIiBwb2ludHM9Ii00LDQgLTQsLTYzNS4xMDQgNjYyLC02MzUuMTA0IDY2Miw0IC00LDQiLz4KPGcgaWQ9ImNsdXN0MiIgY2xhc3M9ImNsdXN0ZXIiPjx0aXRsZT5jbHVzdGVyU2VhcmNoVHZEYjwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMzIyLC0xNzYuMTA0IDMyMiwtNDgyLjEwNCA2NTAsLTQ4Mi4xMDQgNjUwLC0xNzYuMTA0IDMyMiwtMTc2LjEwNCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0ODYiIHk9Ii00NjYuOTA0IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlRoZVRWREI8L3RleHQ+CjwvZz4KPGcgaWQ9ImNsdXN0MyIgY2xhc3M9ImNsdXN0ZXIiPjx0aXRsZT5jbHVzdGVyU2VhcmNoVHZSYWdlPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI4LC0xNzYuMTA0IDgsLTQ4Mi4xMDQgMzE0LC00ODIuMTA0IDMxNCwtMTc2LjEwNCA4LC0xNzYuMTA0Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE2MSIgeT0iLTQ2Ni45MDQiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VFZSYWdlPC90ZXh0Pgo8L2c+CjwhLS0gU3RhcnQgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5TdGFydDwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMzgxLC02MzEuMTA0IDM0My4xNzIsLTYxMy4xMDQgMzgxLC01OTUuMTA0IDQxOC44MjgsLTYxMy4xMDQgMzgxLC02MzEuMTA0Ii8+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjM1NC4wMDgsLTYxOC4yNiAzNTQuMDA4LC02MDcuOTQ3ICIvPgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIzNzAuMTY0LC02MDAuMjYgMzkxLjgzNiwtNjAwLjI2ICIvPgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI0MDcuOTkyLC02MDcuOTQ3IDQwNy45OTIsLTYxOC4yNiAiLz4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMzkxLjgzNiwtNjI1Ljk0NyAzNzAuMTY0LC02MjUuOTQ3ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzODEiIHk9Ii02MDguOTA0IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlN0YXJ0PC90ZXh0Pgo8L2c+CjwhLS0gU2VhcmNoIC0tPgo8ZyBpZD0ibm9kZTEyIiBjbGFzcz0ibm9kZSI+PHRpdGxlPlNlYXJjaDwvdGl0bGU+CjxlbGxpcHNlIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGN4PSIzODEiIGN5PSItNTI3LjEwNCIgcng9IjM0LjMzNTQiIHJ5PSIxOCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzODEiIHk9Ii01MjIuOTA0IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlNlYXJjaDwvdGV4dD4KPC9nPgo8IS0tIFN0YXJ0JiM0NTsmZ3Q7U2VhcmNoIC0tPgo8ZyBpZD0iZWRnZTkiIGNsYXNzPSJlZGdlIj48dGl0bGU+U3RhcnQmIzQ1OyZndDtTZWFyY2g8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMzgxLC01OTQuNjk5QzM4MSwtNTgzLjM2MSAzODEsLTU2OC4zMzEgMzgxLC01NTUuNDE5Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjM4NC41LC01NTUuMTk5IDM4MSwtNTQ1LjE5OSAzNzcuNSwtNTU1LjE5OSAzODQuNSwtNTU1LjE5OSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0NDcuNDM1IiB5PSItNTY1LjkwNCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5RdWVyeTogVFYgU2hvdyBOYW1lPC90ZXh0Pgo8L2c+CjwhLS0gUmVqZWN0IC0tPgo8ZyBpZD0ibm9kZTIiIGNsYXNzPSJub2RlIj48dGl0bGU+UmVqZWN0PC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyODEuNzU5LC01Ni4zMTExIDIzMC4yNDEsLTU2LjMxMTEgMjMwLjI0MSwtNC43OTI0MSAyODEuNzU5LC00Ljc5MjQxIDI4MS43NTksLTU2LjMxMTEiLz4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjQyLjI0MSwtNTYuMzExMSAyMzAuMjQxLC00NC4zMTExICIvPgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyMzAuMjQxLC0xNi43OTI0IDI0Mi4yNDEsLTQuNzkyNDEgIi8+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI2OS43NTksLTQuNzkyNDEgMjgxLjc1OSwtMTYuNzkyNCAiLz4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjgxLjc1OSwtNDQuMzExMSAyNjkuNzU5LC01Ni4zMTExICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyNTYiIHk9Ii0yNi4zNTE4IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlJlamVjdDwvdGV4dD4KPC9nPgo8IS0tIFJlc29sdmUgLS0+CjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPjx0aXRsZT5SZXNvbHZlPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNzIuNjA0LC02MS4xNTU0IDExMS4zOTYsLTYxLjE1NTQgMTExLjM5NiwwLjA1MTg0NTYgMTcyLjYwNCwwLjA1MTg0NTYgMTcyLjYwNCwtNjEuMTU1NCIvPgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMjMuMzk2LC02MS4xNTU0IDExMS4zOTYsLTQ5LjE1NTQgIi8+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjExMS4zOTYsLTExLjk0ODIgMTIzLjM5NiwwLjA1MTg0NTYgIi8+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE2MC42MDQsMC4wNTE4NDU2IDE3Mi42MDQsLTExLjk0ODIgIi8+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE3Mi42MDQsLTQ5LjE1NTQgMTYwLjYwNCwtNjEuMTU1NCAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTQyIiB5PSItMjYuMzUxOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5SZXNvbHZlPC90ZXh0Pgo8L2c+CjwhLS0gdHZkYl9zZWFyY2ggLS0+CjxnIGlkPSJub2RlNCIgY2xhc3M9Im5vZGUiPjx0aXRsZT50dmRiX3NlYXJjaDwvdGl0bGU+CjxlbGxpcHNlIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGN4PSI0NTIiIGN5PSItNDM0LjEwNCIgcng9Ijg3LjkyNDMiIHJ5PSIxOCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0NTIiIHk9Ii00MjkuOTA0IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPlNlYWNoIGJ5IFNob3cgTmFtZTwvdGV4dD4KPC9nPgo8IS0tIHR2ZGJfcmVzdWx0cyAtLT4KPGcgaWQ9Im5vZGU1IiBjbGFzcz0ibm9kZSI+PHRpdGxlPnR2ZGJfcmVzdWx0czwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDg2LC0zNzkuMTA0IDMzMC4wMDEsLTM2MS4xMDQgNDg2LC0zNDMuMTA0IDY0MS45OTksLTM2MS4xMDQgNDg2LC0zNzkuMTA0Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQ4NiIgeT0iLTM1Ni45MDQiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VGhlVFZEQiBTZWFyY2ggUmVzcG9uc2U8L3RleHQ+CjwvZz4KPCEtLSB0dmRiX3NlYXJjaCYjNDU7Jmd0O3R2ZGJfcmVzdWx0cyAtLT4KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+PHRpdGxlPnR2ZGJfc2VhcmNoJiM0NTsmZ3Q7dHZkYl9yZXN1bHRzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTQ2MC4yMywtNDE1LjkxNkM0NjQuMjU2LC00MDcuNTEgNDY5LjE4NiwtMzk3LjIxNiA0NzMuNjUxLC0zODcuODkxIi8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ3Ni45MTcsLTM4OS4xNzQgNDc4LjA3OSwtMzc4LjY0MyA0NzAuNjA0LC0zODYuMTUxIDQ3Ni45MTcsLTM4OS4xNzQiLz4KPC9nPgo8IS0tIHR2ZGJfcmVzdWx0cyYjNDU7Jmd0O1JlamVjdCAtLT4KPGcgaWQ9ImVkZ2U0IiBjbGFzcz0iZWRnZSI+PHRpdGxlPnR2ZGJfcmVzdWx0cyYjNDU7Jmd0O1JlamVjdDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik01MjAuNjQyLC0zNDcuMDMyQzUzMS4wMjgsLTM0MS42MzMgNTQxLjYwOSwtMzM0LjQxMyA1NDksLTMyNS4xMDQgNTYzLjA4MywtMzA3LjM2NSA1NjMsLTI5OC43NTMgNTYzLC0yNzYuMTA0IDU2MywtMjc2LjEwNCA1NjMsLTI3Ni4xMDQgNTYzLC0xMjguMTA0IDU2MywtNzEuODkxNSAzNzMuMzM3LC00NC4zOTU1IDI5Mi4xNjEsLTM1LjIwMTUiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjkyLjIzMywtMzEuNjg4NCAyODEuOTEsLTM0LjA3MjkgMjkxLjQ2NywtMzguNjQ2MyAyOTIuMjMzLC0zMS42ODg0Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjU5MS41ODEiIHk9Ii0xOTcuOTA0IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPk5vIHJlc3VsdHM8L3RleHQ+CjwvZz4KPCEtLSB0dmRiX3Jlc3VsdCAtLT4KPGcgaWQ9Im5vZGU2IiBjbGFzcz0ibm9kZSI+PHRpdGxlPnR2ZGJfcmVzdWx0PC90aXRsZT4KPGVsbGlwc2UgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgY3g9IjQzNyIgY3k9Ii0yNzUuMTA0IiByeD0iODEuNjYxMiIgcnk9IjE4Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQzNyIgeT0iLTI3MC45MDQiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VGhlVFZEQiBTaG93IElEPC90ZXh0Pgo8L2c+CjwhLS0gdHZkYl9yZXN1bHRzJiM0NTsmZ3Q7dHZkYl9yZXN1bHQgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPjx0aXRsZT50dmRiX3Jlc3VsdHMmIzQ1OyZndDt0dmRiX3Jlc3VsdDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik00NjcuNzA4LC0zNDUuMjAzQzQ2MS42NTcsLTMzOS40NyA0NTUuMzY0LC0zMzIuNTA5IDQ1MS4wMDcsLTMyNS4xMDQgNDQ3LjA1OCwtMzE4LjM5MyA0NDQuMTY5LC0zMTAuNTA2IDQ0Mi4wNzgsLTMwMy4wNDQiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDQ1LjQ2NywtMzAyLjE2OCA0MzkuNjk2LC0yOTMuMjgzIDQzOC42NjYsLTMwMy44MjggNDQ1LjQ2NywtMzAyLjE2OCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1MDAuOTk3IiB5PSItMzEzLjkwNCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5SZXR1cm4gZmlyc3QgcmVzdWx0PC90ZXh0Pgo8L2c+CjwhLS0gdHZkYl9zaG93IC0tPgo8ZyBpZD0ibm9kZTciIGNsYXNzPSJub2RlIj48dGl0bGU+dHZkYl9zaG93PC90aXRsZT4KPGVsbGlwc2UgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgY3g9IjQyOSIgY3k9Ii0yMDIuMTA0IiByeD0iOTguMDcyNSIgcnk9IjE4Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQyOSIgeT0iLTE5Ny45MDQiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VGhlVFZEQiBTaG93IFJlY29yZDwvdGV4dD4KPC9nPgo8IS0tIHR2ZGJfcmVzdWx0JiM0NTsmZ3Q7dHZkYl9zaG93IC0tPgo8ZyBpZD0iZWRnZTMiIGNsYXNzPSJlZGdlIj48dGl0bGU+dHZkYl9yZXN1bHQmIzQ1OyZndDt0dmRiX3Nob3c8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNNDM1LjA2MywtMjU2LjkxNkM0MzQuMTU5LC0yNDguODkzIDQzMy4wNjIsLTIzOS4xNTEgNDMyLjA1LC0yMzAuMTczIi8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQzNS41MTYsLTIyOS42NzggNDMwLjkxOSwtMjIwLjEzMiA0MjguNTYxLC0yMzAuNDYxIDQzNS41MTYsLTIyOS42NzgiLz4KPC9nPgo8IS0tIFByb2Nlc3MgU2hvdyAtLT4KPGcgaWQ9Im5vZGUxMyIgY2xhc3M9Im5vZGUiPjx0aXRsZT5Qcm9jZXNzIFNob3c8L3RpdGxlPgo8ZWxsaXBzZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBjeD0iMTU1IiBjeT0iLTEyOS4xMDQiIHJ4PSI1OS40Njg2IiByeT0iMTgiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTU1IiB5PSItMTI0LjkwNCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5Qcm9jZXNzIFNob3c8L3RleHQ+CjwvZz4KPCEtLSB0dmRiX3Nob3cmIzQ1OyZndDtQcm9jZXNzIFNob3cgLS0+CjxnIGlkPSJlZGdlMTIiIGNsYXNzPSJlZGdlIj48dGl0bGU+dHZkYl9zaG93JiM0NTsmZ3Q7UHJvY2VzcyBTaG93PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTM3NC44NjYsLTE4Ny4wNzZDMzI2LjY3MSwtMTc0LjU4OCAyNTYuNTYxLC0xNTYuNDIgMjA4LjU0NSwtMTQzLjk3OCIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyMDkuMjA5LC0xNDAuNTM1IDE5OC42NSwtMTQxLjQxNCAyMDcuNDUzLC0xNDcuMzExIDIwOS4yMDksLTE0MC41MzUiLz4KPC9nPgo8IS0tIHR2cmFnZV9zZWFyY2ggLS0+CjxnIGlkPSJub2RlOCIgY2xhc3M9Im5vZGUiPjx0aXRsZT50dnJhZ2Vfc2VhcmNoPC90aXRsZT4KPGVsbGlwc2UgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgY3g9IjIwMyIgY3k9Ii00MzQuMTA0IiByeD0iODcuOTI0MyIgcnk9IjE4Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIwMyIgeT0iLTQyOS45MDQiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+U2VhY2ggYnkgU2hvdyBOYW1lPC90ZXh0Pgo8L2c+CjwhLS0gdHZyYWdlX3Jlc3VsdHMgLS0+CjxnIGlkPSJub2RlOSIgY2xhc3M9Im5vZGUiPjx0aXRsZT50dnJhZ2VfcmVzdWx0czwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTYxLC0zNzkuMTA0IDE2LjI0MTYsLTM2MS4xMDQgMTYxLC0zNDMuMTA0IDMwNS43NTgsLTM2MS4xMDQgMTYxLC0zNzkuMTA0Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE2MSIgeT0iLTM1Ni45MDQiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VFZSYWdlIFNlYXJjaCBSZXNwb25zZTwvdGV4dD4KPC9nPgo8IS0tIHR2cmFnZV9zZWFyY2gmIzQ1OyZndDt0dnJhZ2VfcmVzdWx0cyAtLT4KPGcgaWQ9ImVkZ2U1IiBjbGFzcz0iZWRnZSI+PHRpdGxlPnR2cmFnZV9zZWFyY2gmIzQ1OyZndDt0dnJhZ2VfcmVzdWx0czwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xOTIuODMzLC00MTUuOTE2QzE4Ny42ODIsLTQwNy4yMDggMTgxLjMzMywtMzk2LjQ3NSAxNzUuNjYzLC0zODYuODkyIi8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE3OC42MDEsLTM4NC45ODQgMTcwLjQ5OCwtMzc4LjE1OSAxNzIuNTc3LC0zODguNTQ4IDE3OC42MDEsLTM4NC45ODQiLz4KPC9nPgo8IS0tIHR2cmFnZV9yZXN1bHRzJiM0NTsmZ3Q7UmVqZWN0IC0tPgo8ZyBpZD0iZWRnZTgiIGNsYXNzPSJlZGdlIj48dGl0bGU+dHZyYWdlX3Jlc3VsdHMmIzQ1OyZndDtSZWplY3Q8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMjA2LjI2NCwtMzQ4LjYyNUMyMTkuMzM5LC0zNDMuMzU1IDIzMi41OTksLTMzNS44MDkgMjQyLC0zMjUuMTA0IDI1Ni45NDUsLTMwOC4wODUgMjU2LC0yOTguNzUzIDI1NiwtMjc2LjEwNCAyNTYsLTI3Ni4xMDQgMjU2LC0yNzYuMTA0IDI1NiwtMTI4LjEwNCAyNTYsLTEwNy43ODYgMjU2LC04NS4wNjI2IDI1NiwtNjYuNzY3Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI1OS41LC02Ni41NTgxIDI1NiwtNTYuNTU4MSAyNTIuNSwtNjYuNTU4MiAyNTkuNSwtNjYuNTU4MSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyODQuNTgxIiB5PSItMTk3LjkwNCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5ObyByZXN1bHRzPC90ZXh0Pgo8L2c+CjwhLS0gdHZyYWdlX3Jlc3VsdCAtLT4KPGcgaWQ9Im5vZGUxMCIgY2xhc3M9Im5vZGUiPjx0aXRsZT50dnJhZ2VfcmVzdWx0PC90aXRsZT4KPGVsbGlwc2UgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgY3g9IjEzNSIgY3k9Ii0yNzUuMTA0IiByeD0iNzMuOTM0NCIgcnk9IjE4Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEzNSIgeT0iLTI3MC45MDQiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+VFZSYWdlIFNob3cgSUQ8L3RleHQ+CjwvZz4KPCEtLSB0dnJhZ2VfcmVzdWx0cyYjNDU7Jmd0O3R2cmFnZV9yZXN1bHQgLS0+CjxnIGlkPSJlZGdlNiIgY2xhc3M9ImVkZ2UiPjx0aXRsZT50dnJhZ2VfcmVzdWx0cyYjNDU7Jmd0O3R2cmFnZV9yZXN1bHQ8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTUyLjEwNSwtMzQ0LjEwM0MxNDkuMTY1LC0zMzguMjY3IDE0Ni4xMTIsLTMzMS41MjIgMTQ0LjAwNywtMzI1LjEwNCAxNDEuNzI1LC0zMTguMTQ2IDEzOS45NjgsLTMxMC40MzEgMTM4LjYzNywtMzAzLjIyMiIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNDIuMDYsLTMwMi40NjUgMTM2Ljk4MiwtMjkzLjE2NiAxMzUuMTUzLC0zMDMuNjAyIDE0Mi4wNiwtMzAyLjQ2NSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxOTMuOTk3IiB5PSItMzEzLjkwNCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5SZXR1cm4gZmlyc3QgcmVzdWx0PC90ZXh0Pgo8L2c+CjwhLS0gdHZyYWdlX3Nob3cgLS0+CjxnIGlkPSJub2RlMTEiIGNsYXNzPSJub2RlIj48dGl0bGU+dHZyYWdlX3Nob3c8L3RpdGxlPgo8ZWxsaXBzZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBjeD0iMTMwIiBjeT0iLTIwMi4xMDQiIHJ4PSI5MC4zNDYzIiByeT0iMTgiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTMwIiB5PSItMTk3LjkwNCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5UVlJhZ2UgU2hvdyBSZWNvcmQ8L3RleHQ+CjwvZz4KPCEtLSB0dnJhZ2VfcmVzdWx0JiM0NTsmZ3Q7dHZyYWdlX3Nob3cgLS0+CjxnIGlkPSJlZGdlNyIgY2xhc3M9ImVkZ2UiPjx0aXRsZT50dnJhZ2VfcmVzdWx0JiM0NTsmZ3Q7dHZyYWdlX3Nob3c8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTMzLjc5LC0yNTYuOTE2QzEzMy4yMjUsLTI0OC44OTMgMTMyLjUzOSwtMjM5LjE1MSAxMzEuOTA2LC0yMzAuMTczIi8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEzNS4zOTMsLTIyOS44NjIgMTMxLjE5OSwtMjIwLjEzMiAxMjguNDEsLTIzMC4zNTQgMTM1LjM5MywtMjI5Ljg2MiIvPgo8L2c+CjwhLS0gdHZyYWdlX3Nob3cmIzQ1OyZndDtQcm9jZXNzIFNob3cgLS0+CjxnIGlkPSJlZGdlMTMiIGNsYXNzPSJlZGdlIj48dGl0bGU+dHZyYWdlX3Nob3cmIzQ1OyZndDtQcm9jZXNzIFNob3c8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTM2LjA1MiwtMTgzLjkxNkMxMzguOTM4LC0xNzUuNzE5IDE0Mi40NTcsLTE2NS43MjcgMTQ1LjY3NCwtMTU2LjU4OCIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNDguOTg0LC0xNTcuNzI3IDE0OS4wMDQsLTE0Ny4xMzIgMTQyLjM4MSwtMTU1LjQwMiAxNDguOTg0LC0xNTcuNzI3Ii8+CjwvZz4KPCEtLSBTZWFyY2gmIzQ1OyZndDt0dmRiX3NlYXJjaCAtLT4KPGcgaWQ9ImVkZ2UxMCIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5TZWFyY2gmIzQ1OyZndDt0dmRiX3NlYXJjaDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0zOTMuMzY3LC01MTAuMjUzQzQwNC4xOTQsLTQ5Ni4zNzYgNDIwLjEwNSwtNDc1Ljk4NCA0MzIuNjIxLC00NTkuOTQxIi8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQzNS40MiwtNDYyLjA0NCA0MzguODEyLC00NTIuMDA3IDQyOS45MDEsLTQ1Ny43MzggNDM1LjQyLC00NjIuMDQ0Ii8+CjwvZz4KPCEtLSBTZWFyY2gmIzQ1OyZndDt0dnJhZ2Vfc2VhcmNoIC0tPgo8ZyBpZD0iZWRnZTExIiBjbGFzcz0iZWRnZSI+PHRpdGxlPlNlYXJjaCYjNDU7Jmd0O3R2cmFnZV9zZWFyY2g8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMzU3LjM2MywtNTE0LjAxOUMzMjguMjgxLC00OTkuMTUyIDI3OC40NDcsLTQ3My42NzUgMjQzLjI4MSwtNDU1LjY5NyIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyNDQuNzI4LC00NTIuNTA1IDIzNC4yMywtNDUxLjA3IDI0MS41NDEsLTQ1OC43MzggMjQ0LjcyOCwtNDUyLjUwNSIvPgo8L2c+CjwhLS0gUHJvY2VzcyBTaG93JiM0NTsmZ3Q7UmVqZWN0IC0tPgo8ZyBpZD0iZWRnZTE1IiBjbGFzcz0iZWRnZSI+PHRpdGxlPlByb2Nlc3MgU2hvdyYjNDU7Jmd0O1JlamVjdDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xNTkuMjk4LC0xMTAuNzQ3QzE2Mi40NzksLTEwMC42MzcgMTY3LjY0OSwtODguMTQyMyAxNzUuNTI3LC03OS4xMDM1IDE4Ny44MDEsLTY1LjAyMTkgMjA1LjMwNywtNTMuOTg5NyAyMjAuODU5LC00Ni4xMTE2Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIyMi43MjUsLTQ5LjA5ODIgMjMwLjIyNSwtNDEuNjE0OSAyMTkuNjk1LC00Mi43ODc4IDIyMi43MjUsLTQ5LjA5ODIiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjA5LjIzNiIgeT0iLTgxLjkwMzUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+SW52YWxpZCBkYXRhPC90ZXh0Pgo8L2c+CjwhLS0gUHJvY2VzcyBTaG93JiM0NTsmZ3Q7UmVzb2x2ZSAtLT4KPGcgaWQ9ImVkZ2UxNCIgY2xhc3M9ImVkZ2UiPjx0aXRsZT5Qcm9jZXNzIFNob3cmIzQ1OyZndDtSZXNvbHZlPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTE1Mi42NzYsLTExMC44NDJDMTUxLjE5OCwtOTkuODYzMiAxNDkuMjIsLTg1LjE3MzEgMTQ3LjM2OCwtNzEuNDIxOSIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNTAuNzkxLC03MC42MDk5IDE0NS45ODcsLTYxLjE2NjMgMTQzLjg1MywtNzEuNTQ0IDE1MC43OTEsLTcwLjYwOTkiLz4KPC9nPgo8L2c+Cjwvc3ZnPgo=" alt="Abfragen und Verarbeiten der Daten von TheTVDB und TVRage" /><figcaption>Abfragen und Verarbeiten der Daten von TheTVDB und TVRage</figcaption>
  </figure>
  </section>
  <p>Obwohl die Daten der API nun als XML (bzw. JavaScript Objekt) vorliegen, müssen noch kleine Transformationen durchgeführt werden, um sie verwenden zu können. So beinhalten einige Felder zwar Zeichenketten, inhaltlich handelt es sich jedoch um Listen von Werten. Das <q>Genre</q>-Feld einer Serie kann beispielsweise den Wert <code>&quot;|Action|Adventure|Comedy|Drama|&quot;</code> haben.</p>
  </section>
  <section id="sec:import-times" class="level3">
  <h3><span class="header-section-number">3.6.3</span> Datum und Zeit einer Episode auslesen</h3>
  <p>Des Weiteren ist das Verarbeiten von Datumsformaten notwendig. Ziel ist es, jeder Episode sowohl Datum als auch Uhrzeit zuzuordnen, wann sie (zuerst) ausgestrahlt wurde. Dies ermöglicht es insbesondere, zukünftige Episoden abzufragen, z.B. um einen Kalender zu implementieren und Benutzer im Voraus zu benachrichtigen.</p>
  <p>Die API von TheTVDB beinhaltet hierzu nur ungenaue Daten <span class="citation" data-cites="local-time">[45]</span>. Jede Episode besitzt zwar ein <code>FirstAired</code>-Feld, dieses beinhaltet jedoch nur das Datum (z.B. <code>&quot;2009-02-03&quot;</code>). Die Uhrzeit der Ausstrahlung ist jedoch im Datensatz der Serie verfügbar (<code>Airs_Time</code>), vermutlich unter der Annahme, dass diese typischerweise nicht variiert. Das Format der Uhrzeit ist jedoch nicht eindeutig, da Werte wie <code>&quot;8:00 PM&quot;</code> verwendet werden, und keine Zeitzone angegeben wird. Es scheint immer die Zeitzone des TV-Senders, auf dem die Serie initial ausgestrahlt wird, verwendet zu werden. Da aber keine Zuordnung von Sendern zu Zeitzonen verfügbar ist, kann hierdurch auch keine genaue Zeitangabe berechnet werden.</p>
  <p>Diese Lücke in der TheTVDB-API bedeutet für EpisodeFever, dass entweder nur unvollständige Daten verfügbar sind, oder zusätzlich Daten aus einer zweiten Quelle geladen werden müssen.</p>
  </section>
  <section id="kombination-von-thetvdb-und-tvrage" class="level3">
  <h3><span class="header-section-number">3.6.4</span> Kombination von TheTVDB und TVRage</h3>
  <p>Eine weitere Quelle für Daten zu TV-Serien ist TVRage <span class="citation" data-cites="tvrage">[46]</span>. Diese Webseite bietet ähnliche Daten wie TheTVDB und wird (zum Teil) ebenfalls von Freiwilligen gepflegt. TVRage bietet ebenfalls eine XML-API, über die Metadaten zu Serien und Episoden abgefragt werden können. Die Endpunkte von TVRage sind ähnlich zu denen von TheTVDB, verwenden aber unterschiedliche URL-Strukturen und Feld-Bezeichnungen.</p>
  <p>Die Daten von TVRage beinhalten vor allem aber neben dem Feld <code>airtime</code> (welches zudem das 24-Stunden-Format für Uhrzeiten verwendet) auch noch das Feld <code>timezone</code>, welches Zeitzonen in Repräsentationen wie <code>&quot;GMT-5 +DST&quot;</code> beinhaltet.</p>
  <p>An TVRage werden die identischen Anfragen gestellt wie an TheTVDB (mit Angepassten URLs und Parametern), sodass nun pro Serie zwei Datensätze zur Verfügung stehen<a href="#fn9" class="footnoteRef" id="fnref9"><sup>9</sup></a>. Da die Daten von TVRage keine Beschreibungen beinhalten<a href="#fn10" class="footnoteRef" id="fnref10"><sup>10</sup></a> und die weiteren Informationen identisch sein sollten, werden nur die Informationen zum Ausstrahlungs-Zeitpunkt von TVRage übernommen.</p>
  </section>
  <section id="aktualisieren-von-serien" class="level3">
  <h3><span class="header-section-number">3.6.5</span> Aktualisieren von Serien</h3>
  <p>Beim initialen Hinzufügen von Serien werden diese anhand ihres Namens gesucht. Das Aktualisieren von Serien kann diesen Schritt überspringen, da mit jedem Serien-Eintrag in der Datenbank ebenfalls die IDs von TheTVDB und TVRage gespeichert werden.</p>
  <p>Dazu werden zugehörige Episoden anhand von Staffel und Nummer eideutig identifiziert und können so auch aktualisiert werden.</p>
  <p>Im derzeitigen Stadium werden alle Serien aktualisiert. Eine mögliche Verbesserung wäre, nur dann neue Daten abzufragen, wenn Aktualisierungen am wahrscheinlichsten oder am relevantesten sind. Das könnte für laufende Serien beispielsweise am Tag vor dem Ausstrahlen neuer Episoden sein. Außerdem könnte für beendete Serien ein sehr viel geringerer Rhythmus gewählt werden.</p>
  </section>
  <section id="import-automatisiert-testen" class="level3">
  <h3><span class="header-section-number">3.6.6</span> Import automatisiert testen</h3>
  <p>Wie die restliche Anwendung auch, soll der Import von Serien testbar sein, um Regressionen zu vermeiden. Da der Import jedoch von externen Diensten abhängt, gibt es hier einige zusätzliche Problemquellen. Die Dienste könnten offline sein, die Struktur ihre Antworten ändern oder auch abgeschaltet werden.</p>
  <section id="http-anfragen-aufzeichnen" class="level4">
  <h4><span class="header-section-number">3.6.6.1</span> HTTP-Anfragen aufzeichnen</h4>
  <p>Es erschien sinnvoll, die HTTP-Anfragen an externe Dienste zwischen zu speichern und nur zu bestimmten Zeitpunkten zu aktualisieren<a href="#fn11" class="footnoteRef" id="fnref11"><sup>11</sup></a>.</p>
  <p>Das Modul <em>replay</em> <span class="citation" data-cites="replay">[47]</span> erlaubt es, das in <em>node</em> integriert HTTP-Modul so zu überschreiben, dass es in verschiedenen Modi operieren kann, vor allem <code>record</code> and <code>replay</code>. (Ursprünglich konnte <em>replay</em> URLs nicht anhand ihrer Query-Parameter unterscheiden, dies wurde als Patch hinzugefügt, wie in <a href="#sec:opensource"><q>Beiträge zu Open Source</q></a> erwähnt.)</p>
  <p>So können Tests ganz normal auf externe HTTP-Server zugreifen und <em>replay</em> schreibt im <code>record</code>-Modus alle erhaltenen Antworten in ein vorher definiertes Verzeichnis. Sobald die Tests erfolgreich ausgeführt wurden, kann auch <code>replay</code> umgestellt werden. Von nun an werden die aufgezeichneten Antworten verwendet.</p>
  <p>Dieses Vorgehen hat auch den Vorteil, dass Tests sehr viel schneller laufen und unabhängig von einer Internetverbindung sind.</p>
  <p><em>replay</em> zeichnet außerdem sehr viele Header auf und speichert den HTTP-Body komprimiert, wenn die ursprüngliche Antwort komprimiert war. Um die Lesbarkeit der Test-Daten zu verbessern, wurden die Daten manuell entpackt, überflüssige Header entfernt und sprechend benannt.</p>
  </section>
  <section id="tests-für-zwei-apis" class="level4">
  <h4><span class="header-section-number">3.6.6.2</span> Tests für zwei APIs</h4>
  <p>Da zwei kleine Module verwendet werden, um den Zugriff auf die APIs zu abstrahieren, war es möglich, jedem Modul ein identische Interface zu geben. Die Daten-Strukturen in den Antworten der APIs werden jedoch nicht vereinheitlicht.</p>
  <p>Alle API-Tests werden unabhängig von der verwendeten API geschrieben und sind Teil einer <code>testApi</code>-Funktion. Diese wird mit Test-Daten und einer API-Schnittstelle aufgerufen. So können mit jeder API die identischen Tests aufgerufen werden und es ist sichergestellt, dass die Daten auf die selbe Art und Weise verarbeitet werden können.</p>
  </section>
  </section>
  </section>
  <section id="bewertungen-abgeben" class="level2">
  <h2><span class="header-section-number">3.7</span> Bewertungen abgeben</h2>
  <p>Kern-Funktion von EpisodeFever ist das Bewerten von Episoden. Ein Bewertungs-Datensatz beinhaltet zu der Bewertung-Zahl selbst<a href="#fn12" class="footnoteRef" id="fnref12"><sup>12</sup></a> Referenzen zu einem Benutzer, einer Serie und einer Episode. Jeder Benutzer kann genau eine Bewertung zu einer Episode abgeben, diese kann jedoch bearbeitet werden.</p>
  <p>Aus diesen Informationen lassen sich viele weitere Daten berechnen, beispielsweise die Durchschnittsbewertungen für Episoden, Staffeln, Serien oder Benutzer. Außerdem lassen sich darüber die Serien bestimmen, die ein Benutzer schaut, ohne dass diese explizit angegeben werden müssen<a href="#fn13" class="footnoteRef" id="fnref13"><sup>13</sup></a>.</p>
  <section id="motivation-auflisten-von-zukünftig-relevanten-episoden" class="level3">
  <h3><span class="header-section-number">3.7.1</span> Motivation: Auflisten von zukünftig relevanten Episoden</h3>
  <p>Als Benutzer möchte ich es möglichst einfach haben, die Episoden zu finden, die ich bewerten möchte. Meist sind das genau die Episoden, die auf die zuvor von mir bewerteten folgen.</p>
  <p>Daher ist eine sehr wichtige Funktion für ein Interface zu EpisodeFever das Auflisten der von einem Benutzer zuvor bewerteten Episoden sowie der darauf folgenden. Wurde zu einer Serie die 14. Episode der dritten Staffel bewerten, sollen z.b. die Episoden 14 bis 19 angezeigt werden. (Es ist zusätzlich zu beachten, dass nur Episoden bewerten werden können, die bereits ausgestrahlt wurden.)</p>
  </section>
  <section id="zuletzt-bewertete-serien-abfragen" class="level3">
  <h3><span class="header-section-number">3.7.2</span> Zuletzt bewertete Serien abfragen</h3>
  <p>Um an die zuvor beschriebenen Daten zu gelagen, wird zunächst eine Liste mit den zuletzt abgegebenen Bewertungen benötigt, gruppiert nach Serie. Eine passende SQL-Abfrage lässt sich wie folgt formulieren:</p>
  <div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> *
  <span class="kw">FROM</span> (
    <span class="kw">SELECT</span>
      <span class="fu">ROW_NUMBER</span>() <span class="kw">OVER</span> (
        <span class="kw">PARTITION</span> <span class="kw">BY</span>
          show_id
        <span class="kw">ORDER</span> <span class="kw">BY</span>
          updated_at <span class="kw">DESC</span> <span class="kw">NULLS</span> <span class="fu">LAST</span>,
          <span class="kw">id</span> <span class="kw">DESC</span> <span class="kw">NULLS</span> <span class="fu">LAST</span>
      ) <span class="kw">AS</span> <span class="fu">row_number</span>,
      t.*
    <span class="kw">FROM</span>
      votes <span class="kw">AS</span> t
    <span class="kw">WHERE</span>
      user_id = ?
  ) <span class="kw">AS</span> latest_votes
  <span class="kw">WHERE</span> <span class="ot">&quot;latest_votes&quot;</span>.<span class="ot">&quot;row_number&quot;</span> &lt;= ?
  <span class="kw">LIMIT</span> ?</code></pre></div>
  <p>Die Parameter für diese Abfrage (im Code als <code>?</code> gekennzeichnet) sind die Benutzer-ID und die Anzahl der abzufragenden Bewertungen.</p>
  <p>Hat man durch diese Abfrage nun eine Liste mit Bewertungen, lassen sich über die darin referenzierten Episoden- und Serien-IDs einfach die weiteren Episoden abfragen, indem man Episoden nach der Serien filtert, nach Staffel und Nummer sortiert und dann nur die ausgibt, welche auf die zuletzt bewertete folgen.</p>
  </section>
  </section>
  <section id="suche" class="level2">
  <h2><span class="header-section-number">3.8</span> Suche</h2>
  <p>Eine Suchfunktionalität ein wichtiger Bestandteil jeder Anwendung, die große Mengen an Daten für die Benutzer zur Verfügung stellt. Sie soll zum einen die Suche nach Information erleichtern und beschleunigen.</p>
  <p>Die wesentlichen Features, die diese bieten sollte sind unter anderem:</p>
  <ul>
  <li>Wörter auf ihren Wortstamm reduzieren</li>
  <li>Stopwörter entfernen (ein, das, im, mit, etc.)</li>
  <li>Gewichtung von Suchergebnissen</li>
  <li>Rechtschreibkorrektur</li>
  </ul>
  <p>Aufgrund der von <em>PostgreSQL</em> zur Verfügung gestellten Funktionen für die Volltextsuche hat sich unsere Entscheidung, eben dieses Datenbanksystem zu benutzen, als richtig erwiesen, da es all die oben genannten Features, aber auch andere nützliche Funktionen, wie z.B. den Support von Fremdsprachen bietet.</p>
  <p>Ein alternatives Systeme für eine dedizierte Volltextsuche ist <em>ElasticSearch</em> <span class="citation" data-cites="elasticsearch">[48]</span>. Dies ist ein auf Apache Lucence <span class="citation" data-cites="lucence">[49]</span> basierendes NoSQL-System, welches darauf ausgelegt ist, große Mengen an Textdaten zu indexieren und effizient durchsuchbar zu machen.</p>
  <section id="anforderungen-an-die-suche" class="level3">
  <h3><span class="header-section-number">3.8.1</span> Anforderungen an die Suche</h3>
  <p>Die Überlegung die wir uns dazu gemacht haben waren folgende: Es gibt 3 Arten von Benutzern:</p>
  <ol type="1">
  <li><p>Der Benutzer weiß genau was er sucht. Er will etwas in die Suche eingeben, das richtige Ergebnis zurückbekommen und schnell auf die Daten zugreifen.</p>
  <p><em>Beispiel:</em> Der Benutzer will eine Bewertung zu seiner Lieblingsserie abgeben und will möglichst schnell auf die entsprechende Seite geleitet werden. Er gibt den Titel der Serie in die Suchleiste ein und gelangt zur Serie.</p></li>
  <li><p>Der Benutzer hat wenig Informationen und möchte, dass ihm dementsprechend Vorschläge gemacht werden, die am ehesten seiner Informationen entsprechen.</p>
  <p><em>Beispiel:</em> Der Benutzer hat 5 Minuten einer ihm unbekannten Serie/Episode geschaut und weiß deshalb nur die Namen von 1-2 Charakteren oder nur einen Teil der Hintergründe, aber nicht den Titel der Serie/Episode. Er tippt was er weiß ein und bekommt nach Relevanz sortierte Vorschläge.</p></li>
  <li><p>Der Benutzer hat keine Informationen und sucht nichts spezifisches. Er wird die Suchfunktion deshalb nicht benutzen und sich höchstens umschauen, welche Serien es gibt, bzw. welche Bewertungen diese haben.</p></li>
  </ol>
  <p>Da der dritte Benutzertyp für die Suchfunktion keine Rolle spielt sind nur die Anforderungen der ersten beiden Benutzer wichtig.</p>
  <p>Die Anforderungen an die Suchfunktion sind somit zusammengefasst: Schnelligkeit, richtige Ergebnisse bei präzisen Anfragen und nach Relevanz sortierte Vorschläge bei unpräzisen Anfragen.</p>
  </section>
  <section id="die-queries" class="level3">
  <h3><span class="header-section-number">3.8.2</span> Die Queries</h3>
  <p>Im wesentlichen besteht die Suche aus 2 SQL Anfragen, der Rechtschreibkorrektur und der Suche nach der Episode oder der Serie, wobei die Rechtschreibkorrektur vor der Suche nach den Serien/Episoden stattfindet. Weshalb dies so umgesetzt wurde, wird im Kapitel <a href="#sec:search-ideas"><q>Idee und Umsetzung</q></a> erläutert.</p>
  </section>
  <section id="suche-nach-episoden" class="level3">
  <h3><span class="header-section-number">3.8.3</span> Suche nach Episoden</h3>
  <div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span>
    shows.name <span class="kw">AS</span> show,
    episodes.name <span class="kw">AS</span> episode,
    episodes.season, episodes.number, episodes.id, episodes.show_id
  <span class="kw">FROM</span> episodes <span class="kw">JOIN</span> shows <span class="kw">ON</span> shows.id = episodes.show_id
  <span class="kw">WHERE</span>
      to_tsvector(<span class="st">'english_nostop'</span>, <span class="kw">coalesce</span>(episodes.name, <span class="st">''</span>)) ||
      to_tsvector(<span class="st">'english'</span>, <span class="kw">coalesce</span>(episodes.description, <span class="st">''</span>)) @@
      to_tsquery(input)
  <span class="kw">ORDER</span> <span class="kw">BY</span>
      ts_rank((
        setweight(to_tsvector(<span class="st">'english_nostop'</span>,<span class="kw">coalesce</span>(episodes.name,<span class="st">''</span>)),<span class="st">'A'</span>) ||
        setweight(to_tsvector(<span class="st">'english'</span>,<span class="kw">coalesce</span>(episodes.description,<span class="st">''</span>)),<span class="st">'B'</span>)),
        to_tsquery(<span class="st">'english_nostop'</span>, input)) <span class="kw">DESC</span></code></pre></div>
  <p>Wie man sieht wird der Name, die Season, die Episodennummer, sowie der Name und die ID der Serie zurückgegeben. Dafür werden die Tabellen <code>episodes</code> und <code>shows</code> gejoint. Der interessante Teil ist der <code>WHERE</code> und <code>ORDER BY</code>-Teil, denn dabei werden die Features der <em>PostgreSQL</em>-Volltextsuche in Anspruch genommen:</p>
  <p><code>to_tsvector([ config regconfig , ] document text)</code> reduziert Text zu einem <code>tsvector</code>, der die Lexeme und deren Position innerhalb des Textes enthält. Ein Lexem ist die <q>Einheit des Wortschatzes, die die begriffliche Bedeutung trägt</q> <span class="citation" data-cites="Duden">[50]</span>.</p>
  <p><code>to_tsquery([ config regconfig , ] query text)</code> normalisiert Wörter und wird zum durchsuchen des ts_vector benutzt.</p>
  <p><code>setweight(tsvector, &quot;char&quot;)</code> Gibt den Lexemen des tsvectors Gewichtungen. <q>Char</q> ist dabei A,B,C oder D, mit A höchstes und D niedrigstes Gewicht.</p>
  <p><code>ts_rank([ weights float4[], ] vector tsvector, query tsquery [, normalization integer ])</code> gibt dem Query einen Rang.</p>
  <p>Der <code>@@</code> Operator überprüft, ob <code>tsvector</code> und <code>tsquery</code> übereinstimmen und liefert <code>true</code> oder <code>false</code>.</p>
  <table>
  <thead>
  <tr class="header">
  <th style="text-align: left;">Beispiel</th>
  <th style="text-align: left;">Ergebnis</th>
  </tr>
  </thead>
  <tbody>
  <tr class="odd">
  <td style="text-align: left;"><code>to_tsvector('english', 'The Fat Rats')</code></td>
  <td style="text-align: left;"><code>'fat':2 'rat':3</code></td>
  </tr>
  <tr class="even">
  <td style="text-align: left;"><code>to_tsquery('english', 'The &amp; Fat &amp; Rats')</code></td>
  <td style="text-align: left;"><code>'fat' &amp; 'rat'</code></td>
  </tr>
  <tr class="odd">
  <td style="text-align: left;"><code>setweight('fat:2,4 cat:3 rat:5B'::tsvector, 'A')</code></td>
  <td style="text-align: left;"><code>'cat':3A 'fat':2A,4A 'rat':5A</code></td>
  </tr>
  <tr class="even">
  <td style="text-align: left;"><code>ts_rank(textsearch, query)</code></td>
  <td style="text-align: left;"><code>0.818</code></td>
  </tr>
  <tr class="odd">
  <td style="text-align: left;"><code>to_tsvector('fat cats') @@ to_tsquery('cat')</code></td>
  <td style="text-align: left;"><code>t</code></td>
  </tr>
  </tbody>
  </table>
  <p>(Beispiele aus <a href="http://www.postgresql.org/docs/8.3/static/functions-textsearch.html">PostgreSQL Dokumentation zu <em>Text Search Functions</em></a>.)</p>
  <p>Die Episoden-Namen und -Beschreibungen werden zu <code>tsvector</code> umgewandelt, gewichtet und mit <code>tsquery</code> untersucht. Was besonders ins Auge fällt, ist dass für die Beschreibungen die Sprache <q>english</q> und für die Titel <q>english_nostop</q> verwendet wurde. Die Sprache <q>english_nostop</q> wurde von uns angelegt und der Unterschied zu <q>english</q> besteht darin, dass Stop Wörter nicht entfernt werden. Dies ist besonders wichtig, da Titel durchaus Stop Wörter enthalten können.</p>
  <p><em>Beispiel:</em> Wenn man die Serie <q>Doctor Who</q> sucht und in die Suche <q>who</q> eingibt würde, die Suche die Serie nicht finden, weil <q>who</q> ein Stop Wort ist.</p>
  <p>Die Ergebnisse der Suche werden abschließend nach Relevanz absteigend sortiert, sodass das Ergebnis mit dem höchsten Rang als erstes ausgegeben wird.</p>
  <section id="query-zur-rechtschreibkorrektur" class="level4">
  <h4><span class="header-section-number">3.8.3.1</span> Query zur Rechtschreibkorrektur</h4>
  <div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> word
  <span class="kw">FROM</span> unique_lexeme
  <span class="kw">WHERE</span> word % input <span class="kw">AND</span> similarity(word, input) &gt;= <span class="fl">0.5</span>
  <span class="kw">ORDER</span> <span class="kw">BY</span> similarity(word,input) <span class="kw">DESC</span>
  <span class="kw">LIMIT</span> <span class="dv">1</span>;</code></pre></div>
  <p>Für die Rechtschreibkorrektur haben wir eine Materialized View <code>unique_lexeme</code> angelegt, die alle Lexeme aus den Serien und Episoden Tabellen enthält. Dafür haben wir die <code>ts_stat</code> Funktion von <em>PostgreSQL</em> benutzt, welche Statistiken über jedes einzelne Lexem aus den <code>tsvector</code>-Daten zurückgibt.</p>
  <p>Zusätzlich haben wir die <em>PostgreSQL</em> Extension <code>pg_trgm</code> (Trigram) verwendet: Diese stellt uns einige wichtige Funktionen und Operationen zur Verfügung um Wörter auf Ähnlichkeit zu untersuchen. Dazu wird ein String in die sogenannten Trigramme zerlegt, diese sind die aufeinanderfolge von 3 Buchstaben aus dem String. Die Trigramme von <q>Trigram</q> wären also beispielsweise <code>[Tri],[rig],[igr],[gra],[ram]</code>, wobei Leerzeichen als Unterstriche dargestellt werden.</p>
  </section>
  <section id="der--operator-und-die-similarity-funktion" class="level4">
  <h4><span class="header-section-number">3.8.3.2</span> Der <code>%</code>-Operator und die <code>similarity</code>-Funktion</h4>
  <p>Der <code>%</code>-Operator untersucht, ob die Ähnlichkeit von 2 Argumenten über einem bestimmten Wert liegt (Default: <code>0.3</code>) und gibt, falls dem so ist true zurück. Similarity gibt eine Zahl zurück, wie Ähnlich 2 Argumente sind, wobei <code>0</code> keine Ähnlichkeit entspricht und <code>1</code>, dass sie identisch sind.</p>
  <p>Wir benutzen beide, da wir zum einen, einen Index benutzen und dieser mit dem <code>%</code>-Operator effizienter genutzt wird und zum anderen benutzen wir<br />Similarity als Post-Filter bei dem wir die Ergebnisse vom <code>%</code>-Operator nochmal filtern.</p>
  </section>
  </section>
  <section id="such-indizes" class="level3">
  <h3><span class="header-section-number">3.8.4</span> Such-Indizes</h3>
  <p>Um die Laufzeit der SQL-Abfragen drastisch zu verringern, stellt <em>PostgreSQL</em> sogenannte Indizes zur Verfügung. Diese sind sozusagen eine Verknüpfung oder eine Art Lesezeichen, auf die bei der Indexerstellung definierte Spalte einer Tabelle.</p>
  <p>Dabei gibt es 2 Arten von Indizes: Den GIN und GiST Index.</p>
  <blockquote>
  <p><q>As a rule of thumb, GIN indexes are best for static data because lookups are faster. For dynamic data, GiST indexes are faster to update. Specifically, GiST indexes are very good for dynamic data and fast if the number of unique words (lexemes) is under 100,000, while GIN indexes will handle 100,000+ lexemes better but are slower to update.</q></p>
  <p>– <a href="http://www.postgresql.org/docs/9.4/static/textsearch-indexes.html">PostgreSQL Dokumentation zu <em>Full Text Search</em></a></p>
  </blockquote>
  <p>Da die Serien- und Episoden-Daten zum größten Teil statisch sind, eine niedrige Laufzeit der Queries für uns wichtig ist und die GiST Indizes auch falsche Ergebnisse liefern können, haben wir entschieden, die GIN-Indizes sowohl für die Suche nach Serien/Episoden, als auch für die Rechtschreibkorrektur zu verwenden.</p>
  </section>
  <section id="sec:search-ideas" class="level3">
  <h3><span class="header-section-number">3.8.5</span> Idee und Umsetzung</h3>
  <p>In diesem Abschnitt behandeln wir unsere Idee für die Suche und deren Umsetzung.</p>
  <p>Die Überlegung war es, dass wir im Frontend eine Library benutzen, welche es uns ermöglicht, die Suchanfragen periodisch bzw. live, also während der Benutzer noch eintippt, zu senden.</p>
  <p>Wir haben uns mehrere Librarys angeschaut, unter anderem <em>typeahead.js</em> <span class="citation" data-cites="typeahead">[51]</span> und <em>rx.js</em> <span class="citation" data-cites="rxjs">[52]</span>, haben uns aber letztendlich für <em>kefir.js</em> <span class="citation" data-cites="kefir">[53]</span> entschieden, da dieses sehr kompakt und besonders performant ist. Wie <em>rx.js</em> bietet <em>kefir.js</em> eine Implementierung von Event-Streams und ermöglicht durch zahlreiche Hilfsmethoden effiziente, funktional reaktive Programmierung <span class="citation" data-cites="maier2010deprecating">[54]</span>.</p>
  <p>Im wesentlichen sieht das Skript für das Autocompletion-Feature wie folgt aus:</p>
  <div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> queries = <span class="ot">Kefir</span>.<span class="fu">fromEvent</span>(inputField, <span class="st">'keyup'</span>)
  .<span class="fu">debounce</span>(<span class="dv">250</span>)
  .<span class="fu">map</span>(<span class="kw">function</span> (ev) { <span class="kw">return</span> <span class="ot">ev</span>.<span class="ot">target</span>.<span class="fu">value</span>; })
  .<span class="fu">filter</span>(<span class="kw">function</span> (val) { <span class="kw">return</span> <span class="ot">val</span>.<span class="fu">length</span> &gt; <span class="dv">0</span>; })
  .<span class="fu">skipDuplicates</span>()
  .<span class="fu">onValue</span>(<span class="kw">function</span> (ev) { <span class="co">/* trigger http request for search */</span> });</code></pre></div>
  <p>Tippt der Benutzer tippt etwas ein, wird die Suchanfrage als <code>GET</code>-Request gesendet und das eingegebene Wort wird mit den Lexemen aus der Materialized View <code>unique_lexeme</code> verglichen. Dabei wird das Lexem mit der größten Ähnlichkeit ausgewählt und dieses an die Suche nach der Serie/Episode als Parameter übergeben. Anschließend werden die Ergebnisse nach Relevanz sortiert zurückgegeben.</p>
  <p>Auf diese Weise haben wir somit alle unsere Anforderungen an die Suche erfüllt: Schnelligkeit, richtige Ergebnisse bei präzisen Anfragen und nach Relevanz sortierte Vorschläge bei unpräzisen Anfragen.</p>
  </section>
  <section id="beispiel-für-eine-suche" class="level3">
  <h3><span class="header-section-number">3.8.6</span> Beispiel für eine Suche</h3>
  <p>Wir wollen <q>Mike</q>, den Namen des Protagonisten aus der Serie <q>Suits</q> in die Suche eingeben und ebendiese Serie zurückbekommen.</p>
  <p>Wir tippen also <q>m</q> ein, der <code>GET</code>-Request wird abgeschickt, die Fehlerkorrektur bestimmt das Lexem das die höchste Bewertung für <q>m</q> hat z.B. <q>mia</q>, übergibt es an die Suche und liefert alle relevanten Ergebnisse.</p>
  <p>Während die Suche durchgeführt wird, tippen wir aber weiter, sodass wir <q>mik</q> in der Suchleiste stehen haben.</p>
  <p>Der <code>GET</code>-Request wird erneut abgeschickt, die Fehlerkorrektur bestimmt, dass das Lexem mit der höchsten Bewertung für <q>mik</q>, <q>mike</q> ist und gibt es an die Suche weiter. Diese gibt uns wieder alle relevanten Ergebnisse zurück. In diesem Beispiel gehen wir davon aus, dass eine andere Serie relevanter ist. Deshalb präzisieren wir unsere Suche und tippen ein <q>mike suit</q>. <code>GET</code>-Request wird abgeschickt, da <q>mike</q> und <q>suit</q> 2 Wörter sind die durch ein Leerzeichen getrennt sind, aber wir nur 1 Wort an die Fehlerkorrektur übergeben können, wird der Input getrennt und ein Array erzeugt. Zuvor wird die Eingabe jedoch bei jeder Suchanfrage normalisiert. Dafür werden unter anderem Leer- und Sonderzeichen durch <q>+</q> ersetzt, sodass immer eine gültige Suchanfrage vorliegt.</p>
  <div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="fu">normalize</span>(word) {
    <span class="kw">var</span> word = <span class="ot">word</span>.<span class="fu">toLowerCase</span>()
    .<span class="fu">replace</span>(<span class="st">&quot;%20&quot;</span>,<span class="st">&quot;+&quot;</span>)
    .<span class="fu">replace</span>(<span class="ot">/</span><span class="fl">(</span><span class="bn">[+]</span><span class="fl">)+</span><span class="ot">/g</span>,<span class="st">&quot;+&quot;</span>)
    .<span class="fu">match</span>(<span class="ot">/</span><span class="fl">(</span><span class="bn">[A-Za-z0-9+]</span><span class="fl">)+</span><span class="ot">/g</span>);
  
    <span class="kw">if</span> ((word === <span class="kw">undefined</span>) || (word === <span class="st">''</span>) || (word === <span class="kw">null</span>)) {
      <span class="kw">throw</span> <span class="kw">new</span> <span class="ot">E</span>.<span class="fu">BadRequestError</span>(<span class="st">&quot;Please enter a valid search query!&quot;</span>);
    } <span class="kw">else</span> {
      <span class="kw">return</span> <span class="ot">word</span>.<span class="fu">join</span>(<span class="st">&quot;+&quot;</span>);
    }
  }</code></pre></div>
  <p>Dann wird die normalisierte Eingabe getrennt und ein Array erzeugt. Das Array wird dann an die Rechtschreibkorrektur übergeben, diese gibt für <q>suit</q>, <q>suits</q> zurück.</p>
  <p><q>mike</q> und <q>suits</q> werden dann zusammengefügt und durch das Zeichen für ein logisches Und getrennt:</p>
  <div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="ot">Promise</span>.<span class="fu">all</span>(
    <span class="ot">input</span>.<span class="fu">split</span>(<span class="st">'+'</span>).<span class="fu">map</span>(<span class="kw">function</span> (word) { <span class="kw">return</span> <span class="fu">spellcheck</span>(word); })
  )
  .<span class="fu">then</span>(<span class="kw">function</span> (words) {
    <span class="kw">var</span> query;
    input = words
    .<span class="fu">filter</span>(<span class="kw">function</span> (word) { <span class="kw">return</span> word &amp;&amp; word[<span class="dv">0</span>]; })
    .<span class="fu">map</span>(<span class="kw">function</span> (word) { <span class="kw">return</span> word[<span class="dv">0</span>].<span class="fu">word</span>; })
    .<span class="fu">join</span>(<span class="st">'&amp;'</span>);
    <span class="co">// ...</span>
  });</code></pre></div>
  <p>Als Input wird nun <code>&quot;mike&amp;suits&quot;</code> an die Suche übergeben und wir bekommen als relevantestes Ergebnis die Serie <q>Suits</q>.</p>
  </section>
  </section>
  </section>
  <section id="fazit" class="level1">
  <h1><span class="header-section-number">4</span> Fazit</h1>
  <p>Die zu Beginn des Projektes gesetzten Ziele – Import von Serien- und Episoden-Daten, autorisierte Benutzer können Episoden bewerten – wurden erreicht. Darüber hinaus wurden auch noch weitere Funktionen implementiert, u.a. eine Suche und eine Übersicht zukünftig für den Benutzer relevante Daten.</p>
  <p>Zudem konnten wir uns im Laufe des Projektes auch mit vielen verschiedenen Technologien vertraut machen. Das Vorgehen nach Test-driven Development und dem Entwurf der JSON-API nach REST-Prinzipen <span class="citation" data-cites="fielding2000rest">[1]</span> und den Best Practices, die in <span class="citation" data-cites="jsonapi">Referenz 38</span> beschrieben wurden, konnten uns helfen, strukturierten Code zu schreiben.</p>
  <section id="rückblick" class="level2">
  <h2><span class="header-section-number">4.1</span> Rückblick</h2>
  <p>Nach Abschluss des Projekts gibt es einige Punkte, die wir im Nachhinein anders machen würden. Im Allgemeinen sind dies jedoch eher kleiner Punkte; keine der im Verlauf der Entwicklung aufgetretenen Probleme waren ein unüberwindbare Hindernisse.</p>
  <p>Die in <a href="#sec:technologien"><q>Technologie</q></a> beschriebenen Entscheidungen haben sich bewährt. Sie haben es ermöglicht, alle gewollten Funktionen umzusetzen, sowie einige zusätzliche zu ermöglichen, z.B. den Kalender-Feed oder die Suche. Auf dieser Basis könnten auch viele Erweiterungen problemlos umgesetzt werden. Außerdem sind wir zuversichtlich, dass die Software in einer Produktivumgebung stabil und performant laufen wird.</p>
  <section id="technologie-entscheidungen" class="level3">
  <h3><span class="header-section-number">4.1.1</span> Technologie-Entscheidungen</h3>
  <p>Zwei Entscheidungen zu Modulen, die wir einsetzen wollten, haben wir revidiert.</p>
  <p>Zu Beginn war geplant, die Benutzer-Authentifizierung auf Basis von <em>Passport</em> <span class="citation" data-cites="passport">[34]</span> zu implementieren. Dieses Modul ist im Grunde jedoch nur eine Sammlung von Adaptern verschiedener Authentifizierungsmethoden, um Benutzer z.B. über deren vorhandene Facebook-, Twitter- und OpenID-Accounts zu registrieren. Das Modul für eine lokale Benutzerverwaltung, <em>passport-local</em> ist ein recht einfacher Adapter, welcher jedoch verlangt, dass die Repräsentation des Benutzers in der Datenbank (Auslesen und Ändern) selbst geschrieben wird. Da dies das mit Abstand komplexeste Unterfangen der Benutzer-Authentifizierung ist und <em>passport-local</em> sonst kaum Funktionen mitbringt, haben wir uns entschieden ganz darauf zu verzichten und den gesamten Workflow selbst zu implementieren. Hätten wir MongoDB verwendet, wäre es jedoch möglich gewesen, <em>passort-local-mongo</em> zu verwenden, welches Session-Handling und das Benutzer-Schema für diese Datenbank implementiert.</p>
  <p>Ein weiteres Modul, welches wir letztendlich nicht verwendet haben, ist <em>node-tvdb</em> <span class="citation" data-cites="node-tvdb">[55]</span>, eine Implementierung der TheTVDB-API. Dieses Modul ließ sich schnell durch die direkte Verwendung von <em>xml2js</em> <span class="citation" data-cites="xml2js">[43]</span> und <em>superagent</em> <span class="citation" data-cites="superagent">[29]</span> ersetzen. Dies hat den zusätzlichen Vorteil, dass auf die selbe Weise auch die Schnittstelle zur TVRage-API geschrieben werden konnte.</p>
  </section>
  <section id="zu-node.js-und-der-zukunft-von-javascript" class="level3">
  <h3><span class="header-section-number">4.1.2</span> Zu node.js und der Zukunft von JavaScript</h3>
  <p>Das ursprüngliche Vorhaben für das Projekt war, eine Applikation auf Basis von <em>node.js</em> zu entwickeln. Abschließend sind wir zufrieden mit dieser Wahl. <em>Node</em> ist zwar noch nicht als <q>1.0</q>-Version erschienen, da es aber von einigen großen Unternehmen bereits für wichtige Projekte verwendet wird, sind große Teile von <em>Node</em> dennoch als stabil und gut getestet einzustufen. Es werden eine Reihe aktueller (wie auch älterer Versionen) regelmäßig mit Sicherheits-Aktualisierungen versehen und viele APIs der Kern-Module sind als stabil markiert.</p>
  <p>Dass <em>node</em> trotz seinem Fokus auf Asynchronität auf dem Ausführen von JavaScript basiert, bedeutet zur Zeit, dass viele Programmier-Techniken zur Abstraktion und Verbesserung der Ergonomie nur als Module verfügbar sind, die Sprache selbst diesen aber agnostisch gegenüber ist. Auch, wenn sich dies mit einer zukünftigen Version von <em>node</em> ändern sollte (z.B. durch die Unterstützung neuer Funktionen aus dem <q>ECMAScript 2015</q>-Standard <span class="citation" data-cites="ecma6">[56]</span>), wird es noch viele Module geben, die diese Techniken nicht verwenden, sowie andere, welche ähnliche, aber inkompatible oder obsolete Implementierungen einsetzen.</p>
  <p>Ein Beispiel hierfür ist die von uns verwendete Bibliothek <em>bluebird</em> <span class="citation" data-cites="bluebird">[20]</span>, um Promises abzubilden. Unsere Wahl fiel explizit auf diese Bibliothek, da sie verspricht, kompatibel zu den nativen Promises in ECMAScript 2015 zu sein. Dass andere von uns verwendeten Module wie <em>knex</em> und <em>bookshelf</em> ebenfalls <em>bluebird</em> als Abhängigkeit haben, war ein ziemlich Glücksgriff. Aus anderen Projekten war bekannt, dass es sonst nötig gewesen wäre, an vielen Stellen Promise-Instanzen der einen in Promise-Instanzen der anderen Bibliothek zu konvertieren, was weder für Performance noch für Entwickler-Effizient gut ist.</p>
  <p>Sobald <em>node</em> in einer stabilen Version einen Großteil der Funktionen von ECMAScript 2015 (und nachfolgenden Revisionen) unterstützt, wird es möglich sein, einige andere Pattern zu verwenden, um Applikationen auf eine andere Weise zu implementieren. Konkret existiert beispielsweise mit <em>koa.js</em> <span class="citation" data-cites="koa">[11]</span> schon eine Alternative zu <em>express.js</em> <span class="citation" data-cites="expressjs">[8]</span>, welche Middlewares auf Basis von Generatoren<a href="#fn14" class="footnoteRef" id="fnref14"><sup>14</sup></a> implementiert.</p>
  <p>Die Grenzen von JavaScript sind auch an anderen Stellen zu sehen. Gerade für größere Projekte kann es problematisch sein, Interfaces korrekt zu definieren und zuversichtlich verwenden zu können, da JavaScript als dynamische Sprache hier von sich aus kaum Sicherheiten bietet. Abhilfe schaffen hier Ansätze wie statische Code-Überprüfung (z.B. mit <em>ESLint</em> <span class="citation" data-cites="eslint">[57]</span>) oder auf JavaScript aufsetzende Type Systeme wie <em>TypeScript</em> <span class="citation" data-cites="typescript">[58]</span> oder <em>Flow</em> <span class="citation" data-cites="flow">[59]</span>.</p>
  <p>Bei der Entwicklung EpisodeFever konnten wir mit den Nachteilen von <em>Node</em> und JavaScript gut umgehen und die Vorteile – eine einfach zu lernende Sprache und ein großen Ökosystem von Modulen – erfolgreich ausnutzen. Für ähnliche Projekte, gerade für kleinere Webserver, würden wir es wieder verwenden.</p>
  </section>
  </section>
  <section id="sec:ausbaustufen" class="level2">
  <h2><span class="header-section-number">4.2</span> Ausbaumöglichkeiten</h2>
  <section id="zeitpunkte-für-daten-aktualisierung" class="level3">
  <h3><span class="header-section-number">4.2.1</span> Zeitpunkte für Daten-Aktualisierung</h3>
  <p>Mit steigender Anzahl von Serien in der Datenbank wird das Aktualisieren der Daten und damit auch das Laden neuer Episoden über die APIs immer länger dauern. Aktuell existiere nur die Möglichkeit, alle Serien-Daten zu aktualisieren.</p>
  <p>Eine Verbesserungs-Möglichkeit wäre, ein Scheduling-System zu verwenden, indem einzelne Serien zu bestimmten Zeitpunkten aktualisiert werden. Während laufende Serien so z.B. einmal pro Woche (etwa zwei Tage vor dem Ausstrahlen einer neuen Episode) aktualisiert werden, könnten beendete Serien weniger häufig aktualisiert werden, da sich diese Daten mit hoher Wahrscheinlichkeit nicht mehr ändern werden.</p>
  </section>
  <section id="durchschnitts-bewertungen-speichern" class="level3">
  <h3><span class="header-section-number">4.2.2</span> Durchschnitts-Bewertungen speichern</h3>
  <p>Aktuell werden Durchschnitts-Bewertungen immer dynamisch berechnet. Für Serien ist dies jedoch mit steigender Anzahl Bewertung recht zeitaufwendig, da immer alle Bewertungs-Einträge gelesen werden müssen. Würde man diese Durchschnitt beim Anlegen bzw. Aktualisieren einer Bewertung berechnen und in der Serie oder Episode speichern, könnte diese Zeit sparen. (Es wird angenommen, dass die Serien bzw. Episoden und deren Durchschnitte häufiger abgefragt werden als Bewertungen gespeichert werden.)</p>
  <p>Dies könnte entweder in der <em>node</em>-Anwendung beim Speichern einer Bewertung oder aber in der <em>Postgres</em>-Datenbank über <em>Trigger</em> realisiert werden.</p>
  </section>
  <section id="empfehlungen-basierend-auf-bisherigen-bewertungen" class="level3">
  <h3><span class="header-section-number">4.2.3</span> Empfehlungen basierend auf bisherigen Bewertungen</h3>
  <p>Als Benutzer von EpisodeFever möchte ich nicht nur mir bekannte Serien bewerten, sondern auch neue entdecken. Ein bekannter und hilfreicher Mechanismus dazu ist das Darstellen von Empfehlungen, welche auf Basis von den von mir und den von anderen Benutzern abgegebenen Bewertungen.</p>
  <p>Viele Algorithmen zum Bestimmen von Empfehlungen beziehen sich auf den E-Commerce-Markt, bei dem es darum geht, Benutzern Produkte zu empfehlen, die sie vielleicht auch kaufen wollen. Häufig sind die einzigen Metriken dazu positive Ereignisse, z.B. <q>Benutzer A hat Produkt X angesehen</q> oder <q>Benutzer A kaufte Produkt X</q>.</p>
  <p>Die von EpisodeFever erfassten Bewertungen bieten dabei detailliertere Informationen. Sie bilden dabei nicht nur die Relation <q>Benutzer A mag Episode X</q> (und darüber transitiv auch <q>Benutzer A mag Serie Z</q>) ab, sondern auch <q>Benutzer gefällt Episode B nicht</q> bzw. <q>Benutzer ist Episode C gegenüber indifferent</q>. Ein möglicher Empfehlungs-Mechanismus muss auch diese Zu- oder Abneigung verarbeiten, um alle Informationen auszunutzen und möglichst genau zu arbeiten.</p>
  </section>
  <section id="sec:watches" class="level3">
  <h3><span class="header-section-number">4.2.4</span> Benutzern das explizite Verwalten von betrachteten Serien erlauben</h3>
  <p>In der aktuellen Form der Anwendung werden die Relationen zwischen Benutzern und Serien nur implizit über die abgegebenen Bewertungen gesetzt. Wurde eine Serie bewertet, so wird angenommen, dass der Benutzer sie schaut.</p>
  <p>Dies hat jedoch zwei Schwachstellen:</p>
  <ol type="1">
  <li>Der Benutzer kann keine Serie explizit entfernen, sodass sie nicht mehr in seiner Liste zukünftiger Episoden auftaucht.</li>
  <li>Es können keine Serien vorgemerkt werden, welche zwar schon angekündigt wurden, wo aber noch keine Episode ausgestrahlt wurde.</li>
  </ol>
  <p>Möglicher Lösungsansatz wäre hier, eine neue Relation <em>Watch</em><a href="#fn15" class="footnoteRef" id="fnref15"><sup>15</sup></a> hinzuzufügen. In dieser wird bei der ersten Bewertung automatisch ein Eintrag mit Benutzer- und Serien-ID erzeugt. Zusätzlich wird dem Benutzer aber auch ermöglicht, selbst diese Relation zu erzeugen, eine Liste mit <em>Watches</em> einzusehen und Einträge daraus zu entfernen.</p>
  </section>
  <section id="server-infrastruktur" class="level3">
  <h3><span class="header-section-number">4.2.5</span> Server-Infrastruktur</h3>
  <p>Um die entwickelte Software betreiben zu können, wird (mindestens) ein korrekt konfigurierter Server benötigt, auf welchen die <em>node</em>-Anwendung sowie <em>Postgres</em> ausgeführt wird. Dies ist bereits nötig, um die Software entwickeln und testen zu können. Die Hardware-Anforderungen für einen solchen Server sind im Vergleich zu existierenden Angeboten[^vserver-preise] nicht besonders hoch; Die <em>node</em>-Anwendung braucht auf dem Entwicklungssystem etwa 36MB RAM und minmal CPU-Leistung. Da die in der Postgres-Datenbank gespeicherten Daten ebenfalls nicht sehr groß sind, sollte es möglich sein, auf einem Server mit 2GB RAM die gesamte Datenbank im Hauptspeicher zu halten.</p>
  <p>Um statische Dateien performant auszuliefern (z.B. Grafiken) und komprimierte Verbindungen sowie verschlüsselte Protokolle wie HTTPS und HTTP2 verwenden, sollte zudem ein Web-Server wie <a href="http://nginx.org/">nginx</a> als <em>Reverse Proxy</em> verwendet werden, welcher im vor der <em>node</em>-Anwendung liegt und an diese die relevanten HTTP-Anfragen weitergibt.</p>
  <p>Es ist zu bedenken, dass Anwendungen auf Basis von <em>node</em> standardmäßig zwar asynchronen Kontrollfluss verwenden, jedoch JavaScript nur in einem Thread ausführen. Auf diese Weise kann der JavaScript-Teil einer <em>node</em>-Anwendung keinen Gebrauch von Mehrprozessor-Systemen machen. Eine recht einfache Lösung dafür ist es, die Anwendung in einem <em>Cluster</em> zu verwenden. Dabei startet ein Master-Prozess die Anwendung in einer beliebigen Anzahl von Kind-Prozessen und gibt Netzwerk-Anfragen an diese weiter.</p>
  <p><em>Cluster</em> ist ein mit <em>node</em> mitgeliefertes Modul. Es ist jedoch von Vorteil, auf einen komplexeres Tool wie <a href="https://github.com/Unitech/pm2">PM2</a> zurückzugreifen. Dieses kann nicht nur mehrere Anwendungen ohne Code-Änderungen als Cluster starten, sondern stellt auch fest, wenn diese abstürzen und kann sie dann neu starten. Des Weiteren bietet es einige Möglichkeiten, Log-Ausgaben mitzuschreiben und CPU- und Speicher-Auslastung pro Prozess einzusehen.</p>
  </section>
  <section id="analyse-von-protokoll-daten" class="level3">
  <h3><span class="header-section-number">4.2.6</span> Analyse von Protokoll-Daten</h3>
  <p>Die Server-Anwendung schreibt Informationen zu jeder gesendeten HTTP-Antwort sowie zu jeder SQL-Abfrage auf <code>stdout</code> (d.h., das Terminal, wenn die Anwendung im Vordergrund läuft, ansonsten das System-Log). Die Protokoll-Daten beinhalten einen Zeitstempel, Art der Anfrage, de Rückgabewert (Fehler-Code) und wie lange der Server brauchte, um die Anfrage zu bearbeiten. Diese Daten müssen im aktuellen Zustand von einem Entwickler oder Administrator persönlich ausgewertet werden, was das Auffinden von Fehlern von Geschwindigkeits-Problemen erschwert.</p>
  <p>Um diese Daten analysieren und darstellen zu können, gibt es passende Software, welche teilweise unter einer Open-Source-Lizenz (vgl. <span class="citation" data-cites="osslicenses">[2]</span>) verfügbar ist. Ein Beispiel hierfür ist die Kombination aus <em>Logstash</em>, <em>Elasticsearch</em> und <em>Kibana</em> (<q>ELK</q>, <span class="citation" data-cites="elk">[60]</span>).</p>
  <p>Mit einer angepassten Konfiguration sollte es möglich sein, die Protokolle der EpisodeFever-Anwendung mit <em>Logstash</em> einlesen zu lassen und die Daten in eine <em>Elasticsearch</em>-Datenbank zu schreiben. Mit <em>Kibana</em> lassen sich diese dann grafisch darstellen, filtern und auswerten.</p>
  </section>
  </section>
  </section>
  <section id="anhang" class="level1">
  <h1><span class="header-section-number">5</span> Anhang</h1>
  <section id="sec:opensource" class="level2">
  <h2><span class="header-section-number">5.1</span> Beiträge zu Open Source</h2>
  <p>Im Rahmen des Projektes wurden einige Beiträge zu Open-Source-Software gemacht bzw. neue Software-Module unter einer Open-Source-Lizenz veröffentlicht.</p>
  <ul>
  <li><p><a href="https://github.com/killercup/sortStringToSql"><code>sortStringToSql</code></a></p>
  <p>Ein von Pascal Hertleif geschriebenes Node-Module, welches eine Funktion bereitstellt um URL-kompatible Anweisungen für Sortierung in SQL zu konvertieren. So wird z.B. <code>&quot;-date,id&quot;</code> zu <code>&quot;date DESC NULLS LAST, id ASC NULLS LAST&quot;</code> konvertiert.</p></li>
  <li><p><a href="https://github.com/assaf/node-replay/pull/50"><code>replay</code></a> <span class="citation" data-cites="replay">[47]</span></p>
  <p>Pascal Hertleif reichte hierzu einen Patch ein, um Query-Strings beim Aufnehmen von HTTP-Anfragen zu speichern (und somit auch URLs anhand der Query-Strings unterscheiden zu können). Dieser Patch ist als Teil von Version 0.11 verfügbar.</p></li>
  </ul>
  <div class="references">
  <h2 id="bibliographie" class="unnumbered">Bibliographie</h2>
  <p>[1] R. T. Fielding, „Architectural Styles and the Design of Network-based Software Architectures“, Doctoral dissertation, University of California, Irvine, 2000. <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm" class="uri">http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm</a></p>
  <p>[2] „Open Source Licenses“. <a href="http://opensource.org/licenses" class="uri">http://opensource.org/licenses</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[3] D. Ryan, „Node.js“ (Version 0.10.32), 2009. <a href="http://nodejs.org/" class="uri">http://nodejs.org/</a>. (Zugegriffen: 22. September 2014)</p>
  <p>[4] I. Z. Schlueter, „node packaged modules“. <a href="http://npmjs.org/" class="uri">http://npmjs.org/</a>. (Zugegriffen: 1. Februar 2015)</p>
  <p>[5] The PostgreSQL Global Development Group, „PostgreSQL“ (Version 9.4.0). <a href="http://postgresql.org/" class="uri">http://postgresql.org/</a>. (Zugegriffen: 1. Februar 2015)</p>
  <p>[6] MongoDB, Inc., „MongoDB“ (Version 2.6.7). <a href="http://www.mongodb.org/" class="uri">http://www.mongodb.org/</a>. (Zugegriffen: 1. Februar 2015)</p>
  <p>[7] MariaDB Foundation, „MariaDB“ (Version 10.0.16). <a href="https://mariadb.org/" class="uri">https://mariadb.org/</a>. (Zugegriffen: 8. Februar 2015)</p>
  <p>[8] T. Holowaychuk, A. Heckmann, C. Jessup, D. C. Wilson, G. Rauch, J. Ong, R. Shtylman, und Y. J. Sim, „express.js“ (Version 4.11.1). <a href="http://expressjs.org/" class="uri">http://expressjs.org/</a>. (Zugegriffen: 1. Februar 2015)</p>
  <p>[9] M. Cavage, „Restify“ (Version 2.8.5). <a href="http://mcavage.me/node-restify/" class="uri">http://mcavage.me/node-restify/</a>. (Zugegriffen: 1. Februar 2015)</p>
  <p>[10] E. Hammer, „HAPI“ (Version 8.1.0). <a href="http://hapijs.com/" class="uri">http://hapijs.com/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[11] T. Holowaychuk, J. Ong, J. Gruber, und Y. He, „Koa.js“ (Version 0.16.0). <a href="http://koajs.com/" class="uri">http://koajs.com/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[12] D. H. Hansson, „Ruby on Rails“ (Version 4.2.0). <a href="http://rubyonrails.org/" class="uri">http://rubyonrails.org/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[13] Django Software Foundation, „Django“ (Version 1.7.4). <a href="https://www.djangoproject.com/" class="uri">https://www.djangoproject.com/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[14] T. Otwell, „Laravel“ (Version 4.2.0). <a href="http://laravel.com/" class="uri">http://laravel.com/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[15] J. Saenz, „Martini“ (Version 1.0.0). <a href="http://martini.codegangsta.io/" class="uri">http://martini.codegangsta.io/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[16] T. Griesser, „bookshelf.js“ (Version 0.7.9). <a href="http://bookshelfjs.org/" class="uri">http://bookshelfjs.org/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[17] T. Griesser, „knex.js“ (Version 0.7.3). <a href="http://knexjs.org/" class="uri">http://knexjs.org/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[18] G. Rauch, „mongoose“ (Version 3.8.23). <a href="http://mongoosejs.com/" class="uri">http://mongoosejs.com/</a>. (Zugegriffen: 7. Februar 2015)</p>
  <p>[19] B. Cavalier und D. Denicola, „Promises/A+“. 6. Dezember 2012. <a href="http://promisesaplus.com/" class="uri">http://promisesaplus.com/</a>. (Zugegriffen: 26. September 2014)</p>
  <p>[20] P. Antonov, „Bluebird“ (Version 2.9.5). <a href="https://github.com/petkaantonov/bluebird" class="uri">https://github.com/petkaantonov/bluebird</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[21] G. Kosev, „Perfomance of Promise Libraries“. <a href="http://spion.github.io/posts/why-i-am-switching-to-promises.html" class="uri">http://spion.github.io/posts/why-i-am-switching-to-promises.html</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[22] S. Baker, „RSpec“ (Version 3.1.7). <a href="http://rspec.info/" class="uri">http://rspec.info/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[23] C. Amavisca, J. Boyens, und G. Van Hove, „Jasmine“ (Version 2.2.1). <a href="http://jasmine.github.io/" class="uri">http://jasmine.github.io/</a>. (Zugegriffen: 8. März 2015)</p>
  <p>[24] A. Sellier, C. Robbins, und J. Sievert, „Vows“ (Version 0.8.1). <a href="http://vowsjs.org/" class="uri">http://vowsjs.org/</a>. (Zugegriffen: 8. März 2015)</p>
  <p>[25] C. Solís und X. Wang, „A study of the characteristics of behaviour driven development“, in <em>Software Engineering and Advanced Applications (SEAA), 2011 37th EUROMICRO Conference on</em>, 2011, S. 383–387. </p>
  <p>[26] J. Luer, „Chai“ (Version 1.10.0). <a href="http://chaijs.com/" class="uri">http://chaijs.com/</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[27] G. Rauch, „expect.js“ (Version 0.3.1). <a href="https://github.com/Automattic/expect.js" class="uri">https://github.com/Automattic/expect.js</a>. (Zugegriffen: 8. März 2015)</p>
  <p>[28] T. Holowaychuk, „SuperTest“ (Version 0.15.0). <a href="https://github.com/tj/supertest" class="uri">https://github.com/tj/supertest</a>. (Zugegriffen: 2. Februar 2015)</p>
  <p>[29] T. Holowaychuk, „SuperAgent“ (Version 0.21.0). <a href="https://github.com/visionmedia/superagent" class="uri">https://github.com/visionmedia/superagent</a>. (Zugegriffen: 6. Februar 2015)</p>
  <p>[30] P. Kleinschmidt und C. Rank, <em>Relationale Datenbanksysteme: Eine praktische Einführung</em>, 3. Aufl. Springer Verlag, 2005. </p>
  <p>[31] T. Griesser, „bcrypt“ (Version 0.5.1). <a href="https://github.com/tgriesser/checkit" class="uri">https://github.com/tgriesser/checkit</a>. (Zugegriffen: 16. März 2015)</p>
  <p>[32] N. Campbell, „bcrypt“ (Version 0.8.1). <a href="https://github.com/ncb000gt/node.bcrypt.js" class="uri">https://github.com/ncb000gt/node.bcrypt.js</a>. (Zugegriffen: 16. März 2015)</p>
  <p>[33] M. Dietz, „Improving user authentication on the web: Protected login, strong sessions, and identity federation“, Doctoral dissertation, Rice University, 2014. <a href="https://scholarship.rice.edu/bitstream/handle/1911/76484/Dissertation_final.pdf?sequence=1" class="uri">https://scholarship.rice.edu/bitstream/handle/1911/76484/Dissertation_final.pdf?sequence=1</a></p>
  <p>[34] J. Hanson, „passport“ (Version 0.2.1). <a href="http://passportjs.org/" class="uri">http://passportjs.org/</a>. (Zugegriffen: 16. März 2015)</p>
  <p>[35] Auth0, Inc., „jsonwebtoken“ (Version 4.2.0). <a href="https://github.com/auth0/node-jsonwebtoken" class="uri">https://github.com/auth0/node-jsonwebtoken</a>. (Zugegriffen: 16. März 2015)</p>
  <p>[36] A. Reinman, „Nodemailer“ (Version 1.3.2). <a href="https://github.com/andris9/Nodemailer" class="uri">https://github.com/andris9/Nodemailer</a></p>
  <p>[37] V. Sahni, „Best Practices for Designing a Pragmatic RESTful API“, 28. Oktober 2013. <a href="http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api" class="uri">http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api</a>. (Zugegriffen: 8. Februar 2015)</p>
  <p>[38] S. Klabnik und Y. Katz, „JSON API“, 25. November 2014. <a href="http://jsonapi.org/" class="uri">http://jsonapi.org/</a></p>
  <p>[39] Cozy Cloud, „cozy-ical“ (Version 1.1.5). <a href="https://github.com/mycozycloud/cozy-ical" class="uri">https://github.com/mycozycloud/cozy-ical</a></p>
  <p>[40] M. Squires und M. Bergman, „faker.js“ (Version 2.1.2). <a href="https://github.com/Marak/faker.js" class="uri">https://github.com/Marak/faker.js</a>. (Zugegriffen: 8. März 2015)</p>
  <p>[41] J. Walters, S. Zsori, und P. Taylor, „TheTVDB“. <a href="http://thetvdb.com/" class="uri">http://thetvdb.com/</a>. (Zugegriffen: 5. Februar 2015)</p>
  <p>[42] „Creative Commons Attribution 3.0 United States“. <a href="http://creativecommons.org/licenses/by/3.0/us/" class="uri">http://creativecommons.org/licenses/by/3.0/us/</a>. (Zugegriffen: 6. Februar 2015)</p>
  <p>[43] M. Kubica, „xml2js“ (Version 0.4.4). <a href="https://github.com/Leonidas-from-XIV/node-xml2js" class="uri">https://github.com/Leonidas-from-XIV/node-xml2js</a>. (Zugegriffen: 4. Februar 2015)</p>
  <p>[44] I. Z. Schlueter, „sax-js“ (Version 0.6.1). <a href="https://github.com/isaacs/sax-js/" class="uri">https://github.com/isaacs/sax-js/</a>. (Zugegriffen: 4. Februar 2015)</p>
  <p>[45] E. Naggum, „The Long, Painful History of Time“. 11. Oktober 1999. <a href="http://naggum.no/lugm-time.html" class="uri">http://naggum.no/lugm-time.html</a>. (Zugegriffen: 4. Februar 2015)</p>
  <p>[46] K. Ainsworth, B. Drummond, R. Anne, und V. Troughton, „TVRage“. <a href="http://tvrage.com/" class="uri">http://tvrage.com/</a>. (Zugegriffen: 5. Februar 2015)</p>
  <p>[47] A. Assaf, „replay“ (Version 1.12.0). <a href="https://github.com/assaf/node-replay" class="uri">https://github.com/assaf/node-replay</a>. (Zugegriffen: 7. Februar 2015)</p>
  <p>[48] S. Banon und Elasticsearch BV, „ElasticSearch“ (Version 1.4.4). <a href="https://www.elastic.co/products/elasticsearch" class="uri">https://www.elastic.co/products/elasticsearch</a>. (Zugegriffen: 16. März 2015)</p>
  <p>[49] The Apache Software Foundation, „Apache Lucence“ (Version 5.0.0). <a href="http://lucene.apache.org/" class="uri">http://lucene.apache.org/</a>. (Zugegriffen: 16. März 2015)</p>
  <p>[50] Bibliographisches Institut GmbH, „Duden: Lexem“. <a href="http://www.duden.de/node/704634/revisions/1395925/view" class="uri">http://www.duden.de/node/704634/revisions/1395925/view</a>. (Zugegriffen: 16. April 2015)</p>
  <p>[51] J. Harding, V. Skarich, und T. Trueman, „typeahead.js“ (Version 0.10.5). <a href="http://twitter.github.io/typeahead.js/" class="uri">http://twitter.github.io/typeahead.js/</a>. (Zugegriffen: 16. April 2015)</p>
  <p>[52] Microsoft Open Technologies, Inc., „Reactive-Extensions“ (Version 2.4.7). <a href="http://reactivex.io/" class="uri">http://reactivex.io/</a>. (Zugegriffen: 16. April 2015)</p>
  <p>[53] R. Pominov, „kefir.js“ (Version 1.3.1). <a href="https://pozadi.github.io/kefir/" class="uri">https://pozadi.github.io/kefir/</a>. (Zugegriffen: 16. April 2015)</p>
  <p>[54] I. Maier, T. Rompf, und M. Odersky, „Deprecating the observer pattern“, EPFL, EPFL Report 148043, Apr. 2010. <a href="http://infoscience.epfl.ch/record/148043/files/DeprecatingObserversTR2010.pdf" class="uri">http://infoscience.epfl.ch/record/148043/files/DeprecatingObserversTR2010.pdf</a>. (Zugegriffen: 24. September 2014)</p>
  <p>[55] E. Wellbrook, „node-tvdb“ (Version 0.4.13), 15. April 2015. <a href="https://github.com/edwellbrook/node-tvdb" class="uri">https://github.com/edwellbrook/node-tvdb</a>. (Zugegriffen: 16. April 2015)</p>
  <p>[56] ECMA International, „Draft Specification for ES.next (Ecma-262 Edition 6) (Draft Rev 27)“, 24. August 2014. <a href="http://wiki.ecmascript.org/lib/exe/fetch.php?id=harmony%3Aspecification_drafts&amp;cache=cache&amp;media=harmony:working_draft_ecma-262_edition_6_08-24-14-nomarkup.pdf">http://wiki.ecmascript.org/lib/exe/fetch.php?id=harmony%3Aspecification_drafts&amp;cache=cache&amp;media=harmony:working_draft_ecma-262_edition_6_08-24-14-nomarkup.pdf</a>. (Zugegriffen: 23. September 2014)</p>
  <p>[57] N. C. Zakas, „ESLint“ (Version 0.19.0), 11. April 2015. <a href="http://eslint.org/" class="uri">http://eslint.org/</a></p>
  <p>[58] Microsoft Corp., „TypeScript“ (Version 1.4.0), 13. Januar 2015. <a href="http://www.typescriptlang.org/" class="uri">http://www.typescriptlang.org/</a>. (Zugegriffen: 16. April 2015)</p>
  <p>[59] Facebook, Inc., „Flow“ (Version 0.8.0), 3. April 2015. <a href="http://flowtype.org/" class="uri">http://flowtype.org/</a>. (Zugegriffen: 16. April 2015)</p>
  <p>[60] Elasticsearch, „The Elasticsearch ELK Stack“. <a href="http://www.elasticsearch.org/overview/" class="uri">http://www.elasticsearch.org/overview/</a>. (Zugegriffen: 8. Februar 2015)</p>
  </div>
  </section>
  </section>
  <section class="footnotes">
  <hr />
  <ol>
  <li id="fn1"><p>Da es ein explizites Ziel des Projektes war, eine Plattform auf Basis von <em>node.js</em> zu entwickeln, wurden Alternativen nicht weiter betrachtet. Da <em>node.js</em> im Grunde eine Bibliothek und Laufzeit-Umgebung für JavaScript ist, sind mögliche Alternativen andere Programmiersprachen wie PHP, Ruby oder Python, welche ähnlich Schnittstellen bieten, aber auch Java, C# oder C++ mit entsprechenden Bibliotheken.<a href="#fnref1">↩</a></p></li>
  <li id="fn2"><p>Am 7. Februar 2015 01:32 Uhr (MEZ) waren laut <em>npmjs.org</em> <span class="citation" data-cites="npm">[4]</span> 123.800 Pakete verfügbar.<a href="#fnref2">↩</a></p></li>
  <li id="fn3"><p>Weitere Informationen zum verwendeten Datenbank-Schema sind <a href="#sec:db-schema">weiter unten</a> zu finden.<a href="#fnref3">↩</a></p></li>
  <li id="fn4"><p><code>server/services/auth/password_helper.js</code><a href="#fnref4">↩</a></p></li>
  <li id="fn5"><p>Für genauere Beschreibung und Analyse dieses Vorgehens siehe <span class="citation" data-cites="authCryptPaper">Referenz 33</span>.<a href="#fnref5">↩</a></p></li>
  <li id="fn6"><p><code>server/services/auth/password_helper.js</code><a href="#fnref6">↩</a></p></li>
  <li id="fn7"><p><q>Creative Commons Attribution 3.0 United States</q>, vgl. <span class="citation" data-cites="cc3-by-us">Referenz 42</span>.<a href="#fnref7">↩</a></p></li>
  <li id="fn8"><p><em>superagent</em> kann auch im Browser-Kontext verwendet werden und bietet so eine einheitliche Schnittstelle auf beiden Plattformen.<a href="#fnref8">↩</a></p></li>
  <li id="fn9"><p>Tatsächlich wird bei der initialen Abfrage der Daten der von TheTVDB zurückgegebene Name der Serie für die Suche mit der TVRage-API verwendet. So wird mit großer Sicherheit die selbe Serie von beiden APIs geliefert. Durch Vergleiche zusätzlicher Daten beim Import kann dies zusätzlich geprüft werden.<a href="#fnref9">↩</a></p></li>
  <li id="fn10"><p>Die Beschreibungen von TVRage können nur mit API-Keys mit speziellen Berechtigungen geladen werden.<a href="#fnref10">↩</a></p></li>
  <li id="fn11"><p>Es könnte beispielsweise alle zwei Wochen ein spezieller Test laufen, welcher die Antworten der APIs vergleicht und einen Entwickler benachrichtigt, wenn es Änderungen gibt. Dies ist unter Umständen auch zuverlässiger als z.B. ein News-Feed zu API-Änderungen eines Dienstes.<a href="#fnref11">↩</a></p></li>
  <li id="fn12"><p>Aktuell sind die Bewertungen <q>Gut</q>, <q>Mittel</q> und <q>Schlecht</q> (als Zahlen 3 bis 1 gepeichert) möglich. Diese Skala kann in Zukunft jedoch einfach geändert werden.<a href="#fnref12">↩</a></p></li>
  <li id="fn13"><p>Es wurde überlegt, die Relation zwischen Benutzer und Serien, die dieser schaut, explizit zu speichern. Die Vorteile hiervon werden im Kapitel <a href="#sec:watches"><q>Ausbaustufen</q></a> beschrieben.<a href="#fnref13">↩</a></p></li>
  <li id="fn14"><p>Generatoren sind vergleichbar mit den z.B. aus Lua bekannten Coroutinen. Im Grunde sind es Funktionen, welche an gewissen Punkten pausiert werden und später fortgesetzt werden können.<a href="#fnref14">↩</a></p></li>
  <li id="fn15"><p>Von engl. <em>schauen</em>, <em>betrachten</em> (<q>eine Fernsehserie schauen</q>), nicht <em>Armbanduhr</em>.<a href="#fnref15">↩</a></p></li>
  </ol>
  </section>
</article>

</body>
</html>
